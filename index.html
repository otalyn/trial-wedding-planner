<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wedding Day Planner</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/vue@3.4.38/dist/vue.global.prod.js"></script>
<style>
[v-cloak]{display:none}

/* ç´€å¿µç¢‘è°·é¢¨æ ¼å…¨åŸŸæ¨£å¼ */
body { 
    background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 50%, #8fd3f4 100%); 
    min-height: 100vh;
    /* ã€å„ªåŒ– 2-1ã€‘ç‚ºäº†åœ¨æ‰‹æ©Ÿä¸Šå¯¦ç¾æ›´ç©©å®šçš„å…¨å±æ•ˆæœï¼Œä½¿ç”¨ 100svhï¼ˆå¦‚æœç€è¦½å™¨æ”¯æŒï¼‰ */
    min-height: 100svh;
    overflow: hidden; /* ç¢ºä¿ body å…§å®¹ä¸æœƒæ»¾å‹•ï¼Œåªè®“ app å…§éƒ¨çš„å…§å®¹æ»¾å‹• */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    padding-bottom: env(safe-area-inset-bottom);
}

/* ã€å„ªåŒ– 2-2ã€‘æ–°å¢ï¼šApp å¤–æ¡†ç¢ºä¿ç©©å®šä½”æ»¿è¦–çª—é«˜åº¦ */
.app-container-full-height {
    height: 100vh; /* å…¼å®¹æ€§å›é€€ */
    height: 100svh; /* åœ¨å‹•æ…‹å·¥å…·æ¬„çš„ç§»å‹•è¨­å‚™ä¸Šæä¾›æ›´ç©©å®šçš„è¦–å£é«˜åº¦ */
    max-height: 100vh;
    max-height: 100svh;
}

.glass-card { 
    background: rgba(255, 255, 255, 0.65); 
    backdrop-filter: blur(16px); 
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.5); 
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1); 
}

/* ã€å„ªåŒ– 3ï¼šæ”¶åˆå‹•ç•«æ¨£å¼ã€‘ */
.filter-slide-enter-active,
.filter-slide-leave-active {
  transition: all 0.3s ease-out;
  overflow: hidden; /* ç¢ºä¿å…§å®¹ä¸æœƒæº¢å‡º */
}

/* é€²å…¥æ™‚çš„æ¨£å¼ï¼šå¾ 0px é«˜åº¦å±•é–‹ */
.filter-slide-enter-from,
.filter-slide-leave-to {
  opacity: 0;
  max-height: 0px; 
  padding-top: 0; /* éæ¸¡æ™‚ç§»é™¤ padding */
  padding-bottom: 0; /* éæ¸¡æ™‚ç§»é™¤ padding */
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* å±•é–‹æ™‚çš„æ¨£å¼ï¼šè¨­å®šä¸€å€‹è¶³å¤ çš„é«˜åº¦ï¼ˆä¾‹å¦‚ 100pxï¼‰ï¼Œè®“å‹•ç•«å¯ä»¥å¹³æ»‘å±•é–‹ */
.filter-slide-enter-to,
.filter-slide-leave-from {
  opacity: 1;
  max-height: 100px; 
}

/* Modal å°ˆç”¨æ¨£å¼ */
.modal-overlay {
    background: rgba(45, 55, 72, 0.4);
    backdrop-filter: blur(6px);
}
.modal-content {
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 12px rgba(168,85,247,0.2); }
  50% { box-shadow: 0 0 24px rgba(168,85,247,0.5); }
}
.soft-glow { animation: glowPulse 2.8s ease-in-out infinite; }
.schedule-done { opacity: 0.5; filter: grayscale(50%); }

.fab { transition: transform 0.1s; }
.fab:active { transform: scale(0.95); }

/* ç®¡ç†æ¸…å–®æŒ‰éˆ•é¡è‰² */
.bg-manage-btn { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); }

.item-checked { text-decoration: line-through; opacity: 0.5; }

/* å½±ç›¸é¡è‰²æ¨™ç±¤ */
.cat-tag-male { background-color: #60a5fa; color: white; }
.cat-tag-female { background-color: #f472b6; color: white; }
.cat-tag-other { background-color: #34d399; color: white; }

/* åº§ä½è¡¨å°ˆç”¨æ¨£å¼ */
.seat-guest-active {
    background: linear-gradient(135deg, #312e81 0%, #4338ca 100%); /* Deep Indigo */
    color: white !important;
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
}
.seat-guest-active span { color: rgba(255,255,255,0.8) !important; }

.animate-fade-in { animation: fadeIn 0.2s ease-out; }
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

/* æ–°å¢ï¼šç”¨æ–¼å¼·åˆ¶æ™‚é–“è¼¸å…¥æ¡†åœ¨ iOS çª„å±ä¸‹ç©©å®š */
.time-input-ios-fix {
    /* ç§»é™¤ Safari é è¨­å¤–è§€ï¼Œé˜²æ­¢å…¶è‡ªå‹•æ·»åŠ éå¤§çš„å…§é‚Šè· */
    -webkit-appearance: none; 
    appearance: none;
    /* ç¢ºä¿æ–‡å­—ä¸æœƒç·Šè²¼é‚Šç·£ï¼Œä½†æ¯” p-3 (1rem) æ›´çª„ï¼Œè®“å‡ºç©ºé–“ */
    padding-left: 0.5rem !important; 
    padding-right: 0.5rem !important; 
}
/* ã€å„ªåŒ– 5-1ã€‘æ–°å¢ç´€å¿µç¢‘è°·é¢¨æ ¼æ¼¸è®ŠæŒ‰éˆ•æ¨£å¼ */
.btn-gradient-blue {
    background-image: linear-gradient(135deg, #9bb9ed 0%, #7ccaf0 100%); /* è—è‰²ä¸»é¡Œï¼šç”·å®¶ */
    color: white;
    font-weight: bold;
    transition: all 0.2s ease-in-out;
}
.btn-gradient-pink {
    background-image: linear-gradient(135deg, #fab6e6 0%, #fb8185 100%); /* ç²‰è‰²ä¸»é¡Œï¼šå¥³å®¶ */
    color: white;
    font-weight: bold;
    transition: all 0.2s ease-in-out;
}
.btn-gradient-red {
    background-image: linear-gradient(135deg, #f8898d 0%, #fe6584 100%); /* ç´…è‰²ä¸»é¡Œï¼šåˆ©æ˜¯ */
    color: white;
    font-weight: bold;
    transition: all 0.2s ease-in-out;
}
.btn-gradient-mint {
    background-image: linear-gradient(135deg, #6ffac7 0%, #4adeb9 100%); /* è–„è·ç¶ ä¸»é¡Œï¼šç¦®ç‰© */
    color: #4a5568; /* æ·±è‰²æ–‡å­— */
    font-weight: bold;
    transition: all 0.2s ease-in-out;
}
/* ã€å„ªåŒ– 6-1ã€‘æ–°å¢ï¼šæ·±è—è‰²æ¼¸è®Š (ç”¨æ–¼ Item ç®¡ç†æ¸…å–®æŒ‰éˆ•ï¼Œæ¨¡æ“¬åº§ä½è¡¨åˆ°å ´è³“å®¢è‰²) */
.btn-gradient-dark-blue {
    background-image: linear-gradient(135deg, #4c669f 0%, #3b5998 50%, #2b498f 100%); 
    color: white;
    font-weight: bold;
    /* ç¢ºä¿æŒ‰éˆ•æœ‰é™°å½±æ•ˆæœï¼Œæ¨¡æ“¬ç´€å¿µç¢‘è°·é¢¨æ ¼çš„æµ®å‹•æ„Ÿ */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
    transition: all 0.2s ease-in-out;
}
</style>
</head>
<body class="flex items-center justify-center p-0">

<div id="app" v-cloak class="relative w-full max-w-md h-screen app-container-full-height glass-card rounded-[2.5rem] flex flex-col overflow-hidden">
  
  <div class="p-5 text-center font-bold text-gray-700 text-lg tracking-widest border-b border-white/30 bg-white/20">
    {{ pageTitle }}
  </div>

  <div class="flex-1 overflow-y-auto p-4 pb-24 scroll-smooth">

    <div v-if="tab==='schedule'" class="relative">
      <div v-if="scheduleList.length===0" class="text-center text-gray-400 mt-16">
        <div class="text-4xl mb-2">â±ï¸</div>
        <div class="text-sm">å°šæœªæ–°å¢è¡Œç¨‹</div>
      </div>
      <div v-if="scheduleList.length > 0" class="sticky top-4 z-50 h-0 overflow-visible ml-1">
        <div class="absolute top-0 left-0 flex flex-col items-start gap-2">
            
            <button @click="isFilterCollapsed = !isFilterCollapsed" 
                    class="w-10 h-10 rounded-full bg-white/80 backdrop-blur-md shadow-lg border border-white/60 text-purple-600 font-bold flex items-center justify-center transition-transform active:scale-95">
                <span v-if="isFilterCollapsed" class="text-lg">ğŸ”</span>
                <span v-else class="text-lg">âœ•</span>
            </button>
            
            <div v-if="isFilterCollapsed && responsibleFilter !== 'å…¨éƒ¨'" 
                 @click="isFilterCollapsed = false"
                 class="bg-purple-500/90 text-white text-[10px] px-3 py-1 rounded-full shadow-md backdrop-blur font-bold cursor-pointer animate-fade-in">
                 {{ responsibleFilter }}
            </div>

            <div v-show="!isFilterCollapsed" 
                 class="bg-white/95 backdrop-blur-xl p-3 rounded-2xl shadow-2xl border border-white/60 w-40 flex flex-col gap-2 max-h-[60vh] overflow-y-auto animate-fade-in">
                 
                 <div class="text-[10px] text-gray-400 font-bold ml-1 mb-1">ç¯©é¸è² è²¬äºº</div>
                 
                 <button @click="responsibleFilter='å…¨éƒ¨'; isFilterCollapsed=true; scrollToCurrentSchedule();"
                         :class="responsibleFilter==='å…¨éƒ¨' ? 'bg-purple-500 text-white shadow' : 'bg-gray-100 text-gray-600'"
                         class="py-2 px-3 rounded-xl text-xs font-bold text-left transition-all">
                     å…¨éƒ¨
                 </button>

                 <button v-for="p in uniqueResponsibles" :key="p" 
                         @click="responsibleFilter=p; isFilterCollapsed=true; scrollToCurrentSchedule();"
                         :class="responsibleFilter===p ? 'bg-purple-500 text-white shadow' : 'bg-gray-100 text-gray-600'"
                         class="py-2 px-3 rounded-xl text-xs font-bold text-left transition-all">
                     {{ p }}
                 </button>
            </div>
        </div>
      </div>
      <div v-if="scheduleList.length > 0" class="border-l-2 border-gray-300 ml-4 space-y-6">
        <div v-for="s in filteredScheduleList" :key="s.id" class="relative pl-6">
          <div class="absolute -left-[7px] top-4 w-3 h-3 rounded-full"
               :class="isOngoing(s.startTime,s.endTime)?'bg-violet-400 shadow-md':'bg-gray-400'"></div>
          <div @click="toggleCard(s.id)"
               :id="isOngoing(s.startTime, s.endTime) ? 'current-schedule-item' : null" 
               :data-id="s.id"
               class="rounded-2xl p-4 bg-white/60 shadow-sm transition-all cursor-pointer relative"
               :class="{'soft-glow border-2 border-purple-300': isOngoing(s.startTime,s.endTime), 'schedule-done': isFinished(s.startTime,s.endTime)}">
            <div class="text-xs text-gray-500 font-medium">
              {{ s.startTime }}<span v-if="s.endTime">ï½{{ s.endTime }}</span> 
            </div>
            <span v-if="s.place" class="absolute top-3 right-4 text-xs font-medium text-gray-500">
             @{{ s.place }}
            </span>
            <div class="font-bold text-gray-700 text-base">{{ s.title }}</div>
            <div class="flex flex-wrap gap-2 mt-2">
              <div v-for="p in s.people" :key="p" class="flex items-center gap-1 text-[10px] bg-white/50 px-2 py-0.5 rounded-full">
                <span class="w-1.5 h-1.5 rounded-full" :class="getPersonColor(p)"></span>{{ p }}
              </div>
            </div>
            <div v-if="s.expanded" class="mt-3 pt-3 border-t border-gray-200/50 text-xs text-gray-600 space-y-2">
              <div v-if="s.tasks"><strong class="text-purple-600">ä»»å‹™:</strong> <div class="whitespace-pre-line pl-1">{{ s.tasks }}</div></div>
              <div v-if="s.items"><strong class="text-amber-600">ç‰©è³‡:</strong> <div class="whitespace-pre-line pl-1">{{ s.items }}</div></div>
              <div v-if="s.note"><strong class="text-gray-500">å‚™è¨»:</strong> <div class="whitespace-pre-line pl-1">{{ s.note }}</div></div>
              <button @click.stop="openEditSchedule(s)" class="w-full mt-2 bg-purple-500 text-white py-1.5 rounded-lg font-bold">ç·¨è¼¯è©³æƒ…</button>
            </div>
          </div>
        </div>
      </div>
      <div v-if="responsibleFilter !== 'å…¨éƒ¨' && filteredScheduleList.length === 0" class="text-center p-6 text-gray-500">
                <p>æ‰¾ä¸åˆ°è² è²¬äººç‚ºã€Œ{{ responsibleFilter }}ã€çš„è¡Œç¨‹ã€‚</p>
            </div>
      <button @click="openAddSchedule" class="fab fixed bottom-24 right-8 w-14 h-14 rounded-full bg-gradient-to-br from-violet-400 to-fuchsia-400 text-white text-3xl shadow-lg z-40">+</button>
    </div>

    <div v-if="tab==='gold'" class="space-y-4">
      <div class="flex justify-between items-center px-1">
        <span class="text-xs text-gray-500">å·²è¨˜éŒ„: {{ golds.length }} ä»¶</span>
        <button @click="exportGoldCSV" class="text-xs text-amber-700 bg-amber-100 px-3 py-1 rounded-full font-bold">åŒ¯å‡º CSV</button>
      </div>
      <div v-for="g in golds" :key="g.id" class="glass-card rounded-2xl p-4 transition-all" :class="g.deleted ? 'opacity-40 grayscale' : ''">
        <div class="flex justify-between items-start">
          <div>
            <div class="text-sm font-black text-gray-700">#{{ g.no }} {{ g.category }} Ã— {{ g.qty }}</div>
            <div class="text-[11px] mt-1 font-bold" :class="g.side==='ç”·å®¶'?'text-blue-500':'text-pink-500'">
              <span class="inline-block w-2 h-2 rounded-full mr-1" :class="g.side==='ç”·å®¶'?'bg-blue-400':'bg-pink-400'"></span>{{ g.side }}
            </div>
          </div>
          <div class="text-right">
            <div class="text-xs font-medium text-gray-600">{{ g.from }}</div>
          </div>
        </div>
        <img v-if="g.image" :src="g.image" class="mt-3 w-full h-32 object-cover rounded-xl shadow-inner" />
        <div class="flex gap-4 text-xs mt-3 pt-3 border-t border-white/30">
          <button v-if="!g.deleted" @click="openEditGold(g)" class="text-blue-600 font-bold">ç·¨è¼¯</button>
          <button v-if="!g.deleted" @click="softDeleteGold(g)" class="text-red-500 font-bold">åˆªé™¤</button>
          <button v-if="g.deleted" @click="restoreGold(g)" class="text-green-600 font-bold">å¾©åŸ</button>
        </div>
      </div>
      <button @click="openAddGold" class="fab fixed bottom-24 right-8 w-14 h-14 rounded-full bg-gradient-to-br from-amber-300 to-orange-400 text-white text-3xl shadow-lg z-40">+</button>
    </div>

    <div v-if="tab==='gift'" class="space-y-4">
      <div class="flex justify-between items-center px-1">
        <span class="text-xs text-gray-500">ç¸½é‡‘é¡: ${{ totalGiftAmount }}</span>
        <button @click="exportGiftCSV" class="text-xs text-rose-700 bg-rose-100 px-3 py-1 rounded-full font-bold">åŒ¯å‡º CSV</button>
      </div>
      <div v-for="g in gifts" :key="g.id" class="glass-card rounded-2xl p-4" :class="g.deleted ? 'opacity-40 grayscale' : ''">
        <div class="flex justify-between">
          <div class="text-sm font-black text-gray-700">#{{ g.no }} {{ g.type }} <span v-if="g.type==='ç¦®ç‰©'" class="text-gray-500 font-normal">({{ g.desc }})</span> Ã— {{ g.qty }}</div>
          <div class="text-rose-600 font-bold text-sm">${{ g.amount }}</div>
        </div>
        <div class="flex items-center gap-2 mt-2">
            <span class="text-[11px] font-bold px-2 py-0.5 rounded-md" :class="g.side==='ç”·å®¶'?'bg-blue-100 text-blue-600':'bg-pink-100 text-pink-600'">{{ g.side }}</span>
            <span class="text-xs text-gray-500">{{ g.from }}</span>
        </div>
        <div class="flex gap-4 text-xs mt-3 pt-3 border-t border-white/30">
          <button v-if="!g.deleted" @click="openEditGift(g)" class="text-blue-600 font-bold">ç·¨è¼¯</button>
          <button v-if="!g.deleted" @click="softDeleteGift(g)" class="text-red-500 font-bold">åˆªé™¤</button>
          <button v-if="g.deleted" @click="restoreGift(g)" class="text-green-600 font-bold">å¾©åŸ</button>
        </div>
      </div>
      <button @click="openAddGift" class="fab fixed bottom-24 right-8 w-14 h-14 rounded-full bg-gradient-to-br from-rose-400 to-red-500 text-white text-3xl shadow-lg z-40">+</button>
    </div>

    <div v-if="tab==='info'">
      <div class="flex p-1 bg-white/40 rounded-2xl mb-6 gap-1 border border-white/50 shadow-inner">
        <button @click="infoTab='items'" :class="infoTab==='items' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-500'" class="flex-1 py-2 text-[10px] font-black rounded-xl transition-all">ğŸ“¦ ç‰©è³‡è¡¨</button>
        <button @click="infoTab='photo'" :class="infoTab==='photo' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-500'" class="flex-1 py-2 text-[10px] font-black rounded-xl transition-all">ğŸ“¸ å½±ç›¸æ¬¡åº</button>
        <button @click="infoTab='seat'" :class="infoTab==='seat' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-500'" class="flex-1 py-2 text-[10px] font-black rounded-xl transition-all">ğŸ½ï¸ æ™šå®´åº§ä½</button>
      </div>
      
      <div v-if="infoTab==='items'" class="space-y-3 relative">
        <div v-for="(list, listName) in itemLists" :key="listName" class="bg-white/30 rounded-2xl border border-white/50 overflow-hidden">
          <div @click="toggleList(listName)" class="flex justify-between items-center p-4 cursor-pointer">
            <h4 class="font-bold text-gray-700 text-sm">ğŸ”¹ {{ listName }}</h4>
            <span class="text-gray-400 text-xs">{{ expandedLists.includes(listName) ? 'â–²' : 'â–¼' }}</span>
          </div>
          <div v-show="expandedLists.includes(listName)" class="p-4 pt-0 space-y-1 border-t border-white/20">
            <div v-for="(item, index) in list" :key="index" class="flex items-center gap-3 py-2 border-b border-white/10 last:border-0">
              <input type="checkbox" v-model="item.checked" @change="saveInfo" class="w-4 h-4 rounded border-gray-300 text-purple-500">
              <span class="flex-1 text-sm" :class="item.checked ? 'item-checked' : 'text-gray-700'">{{ item.name }}</span>
              <button @click="removeItem(listName, index)" class="text-gray-300 text-xs">âœ•</button>
            </div>
            <button @click="openAddItemModal(listName)" class="w-full mt-3 py-2 text-[10px] text-indigo-500 font-bold border border-dashed border-indigo-200 rounded-xl">+ æ–°å¢ç‰©è³‡</button>
          </div>
        </div>
        <div class="fixed bottom-24 right-8 flex flex-col items-end gap-3 z-50">
          <div v-if="showManageSubMenu" class="flex flex-col gap-2 mb-2 animate-fade-in">
             <button @click="openAddListModal" class="bg-white/90 backdrop-blur shadow-lg px-4 py-2 rounded-full text-xs font-bold text-indigo-700 border border-indigo-100">ï¼‹ æ–°å¢æ¸…å–®</button>
             <button @click="openEditListModal" class="bg-white/90 backdrop-blur shadow-lg px-4 py-2 rounded-full text-xs font-bold text-indigo-700 border border-indigo-100">âœ ç·¨è¼¯æ¨™é¡Œ</button>
             <button @click="openRemoveListModal" class="bg-rose-50/90 backdrop-blur shadow-lg px-4 py-2 rounded-full text-xs font-bold text-rose-600 border border-rose-100">âœ• ç§»é™¤æ¸…å–®</button>
          </div>
          <button @click="showManageSubMenu = !showManageSubMenu" class="w-14 h-14 rounded-full btn-gradient-dark-blue text-white text-2xl shadow-xl flex items-center justify-center">
            <span v-if="!showManageSubMenu">âœ</span>
            <span v-else>âœ•</span>
          </button>
        </div>
      </div>

      <div v-if="infoTab==='photo'" class="space-y-4 pb-20">
    
    <div v-for="(list, listIdx) in photoSchedules" :key="listIdx" class="bg-white/40 rounded-2xl p-4 border border-white/50 relative">
        
        <div @click="togglePhotoGroup(list.title)" class="flex justify-between items-center cursor-pointer">
            <h4 class="font-bold text-gray-700 text-sm">ğŸ“¸ {{ list.title }}</h4>
            
            <svg :class="{'rotate-90': !collapsedPhotoGroups[list.title]}" class="w-5 h-5 text-gray-500 transition-transform duration-300 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>
        
        <button @click="openEditPhotoList(listIdx)" class="absolute top-4 right-4 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-2 py-1 rounded-md z-10">ç·¨è¼¯</button>

        <div v-show="!collapsedPhotoGroups[list.title]" class="mt-3">
            <div class="space-y-2">
                <div v-for="(p, pIdx) in list.groups" :key="pIdx" class="flex items-center gap-3 py-1.5 border-b border-white/5 font-medium">
                    <span class="text-[10px] font-bold text-gray-400 w-5">#{{ pIdx + 1 }}</span>
                    <span class="flex-1 text-[13px] text-gray-700">{{ p.name }}</span>
                    <div class="flex items-center gap-1">
                        <span v-if="p.count" class="text-[10px] text-gray-500 font-mono">{{ p.count }}äºº</span>
                        <span class="w-2 h-2 rounded-full" :class="getPhotoCatColor(p.cat)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <button @click="openAddPhotoList" class="w-full py-3 text-sm font-bold text-indigo-600 bg-indigo-50/50 border border-dashed border-indigo-200 rounded-2xl">+ æ–°å¢å½±ç›¸æ¬¡åº</button>
</div>

      <div v-if="infoTab==='seat'" class="space-y-4 pb-24">
        <input v-model="seatSearch" placeholder="ğŸ” æœå°‹å§“åã€èº«ä»½ã€æ¡Œè™Ÿ..." class="w-full bg-white/60 border-white/50 border rounded-2xl px-5 py-3 text-sm shadow-sm outline-none focus:ring-2 focus:ring-purple-200 transition-all">
        
        <div v-for="table in filteredSeatTables" :key="table.id" class="glass-card rounded-[2rem] p-5 shadow-sm transition-all hover:shadow-md">
          <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-200/50">
            <div>
                <h4 class="font-black text-gray-800 text-lg">Table {{ table.id }}</h4>
                <div class="text-xs text-purple-600 font-bold mt-0.5">{{ table.category }}</div>
            </div>
            <div class="flex flex-col items-end">
                <span class="text-[10px] text-white font-bold bg-gray-400/80 px-2 py-1 rounded-full shadow-sm mb-1">
                    å·²åˆ° {{ table.guests.filter(g=>g.present).length }} / {{ table.guests.length }}
                </span>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-2">
            <div v-for="(guest, idx) in table.guests" :key="idx" 
                 @click="toggleGuestPresent(table.id, idx)"
                 class="p-2.5 rounded-xl text-center cursor-pointer transition-all duration-200 flex flex-col justify-center min-h-[56px] select-none"
                 :class="guest.present ? 'seat-guest-active scale-[1.02]' : 'bg-white/50 text-gray-600 border border-transparent hover:bg-white/80'">
              <span class="font-black text-[13px] truncate leading-tight">{{ guest.name || guest.role }}</span>
              <span v-if="guest.name && guest.role" class="text-[9px] opacity-70 truncate mt-0.5">({{ guest.role }})</span>
              <span v-else-if="!guest.name && guest.role" class="text-[9px] opacity-70 truncate mt-0.5">(æœªçŸ¥å§“å)</span>
            </div>
          </div>
          
          <button @click="openEditSeatModal(table)" class="w-full mt-4 py-2 text-[11px] text-gray-500 font-bold bg-gray-50/50 rounded-xl hover:bg-gray-100 transition-colors">
            âš™ï¸ ç·¨è¼¯å‘¢åœ
          </button>
        </div>

        <div v-if="filteredSeatTables.length === 0" class="text-center text-gray-400 py-10">
            æ²’æœ‰æ‰¾åˆ°ç¬¦åˆçš„åº§ä½æˆ–è³“å®¢
        </div>

        <button @click="addSeatTable" class="w-full py-3 text-sm font-bold text-indigo-600 bg-indigo-50/80 border border-dashed border-indigo-300 rounded-2xl shadow-sm hover:bg-indigo-100 transition-all">
          + åŠ å¤šä¸€åœ
        </button>
      </div>
    </div>

    <div v-if="tab==='contact'" class="space-y-4">
      <input v-model="contactSearch" placeholder="æœå°‹å§“å / èº«ä»½" class="w-full rounded-2xl border-none bg-white/50 px-4 py-3 text-sm shadow-inner focus:ring-2 focus:ring-emerald-200" />
      <div class="flex gap-2 p-1 bg-white/30 rounded-xl overflow-x-auto">
        <button v-for="c in contactCats" :key="c" @click="contactFilter=c" :class="['whitespace-nowrap flex-1 py-2 px-3 rounded-lg text-xs font-bold transition', contactFilter===c ? getContactActiveColor(c) : 'text-gray-500']">{{ c }}</button>
      </div>
      <div v-for="c in filteredContacts" :key="c.id" class="relative glass-card rounded-2xl p-4 shadow-sm">
        <div class="absolute top-3 right-3 flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-bold" :class="getContactTagClass(c.side)">
          <span class="w-1.5 h-1.5 rounded-full" :class="getContactDotClass(c.side)"></span>{{ c.side }}
        </div>
        <div class="font-black text-gray-700 text-base">{{ c.name }}</div>
        <div class="text-[11px] text-gray-500 font-medium mb-3">{{ c.role }}</div>
        <div class="flex items-center justify-between pt-2 border-t border-white/40">
          <div class="flex items-center gap-4">
            <a :href="'tel:'+c.phone" class="w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full text-blue-600 shadow-sm">ğŸ“</a>
            <a :href="'https://wa.me/'+c.phone" target="_blank" class="w-8 h-8 flex items-center justify-center bg-green-100 rounded-full text-green-600 font-bold text-xs shadow-sm">WA</a>
            <span class="text-gray-600 font-mono text-sm">{{ c.phone }}</span>
          </div>
          <div class="flex gap-3">
            <button @click="openEditContact(c)" class="text-blue-500 text-[10px] font-bold">ç·¨è¼¯</button>
            <button @click="deleteContact(c.id)" class="text-red-400 text-[10px] font-bold">åˆªé™¤</button>
          </div>
        </div>
      </div>
      <button @click="openAddContact" class="fab fixed bottom-24 right-8 w-14 h-14 rounded-full bg-gradient-to-br from-emerald-300 to-teal-400 text-white text-3xl shadow-lg z-40">+</button>
    </div>

  </div>

  <div class="h-20 border-t bg-white/80 backdrop-blur-md flex justify-around items-center text-[10px] font-bold shrink-0 z-50 shadow-xl">
    <button @click="tab='schedule'" :class="tab==='schedule'?'text-purple-600 scale-110':''" class="flex flex-col items-center gap-1"><span class="text-xl">â›ª</span>è¡Œç¨‹</button>
    <button @click="tab='gold'" :class="tab==='gold'?'text-amber-600 scale-110':''" class="flex flex-col items-center gap-1"><span class="text-xl">ğŸ…</span>é‡‘å™¨</button>
    <button @click="tab='gift'" :class="tab==='gift'?'text-rose-600 scale-110':''" class="flex flex-col items-center gap-1"><span class="text-xl">ğŸ§§</span>åˆ©æ˜¯/ç¦®ç‰©</button>
    <button @click="tab='info'" :class="tab==='info'?'text-gray-700 scale-110':''" class="flex flex-col items-center gap-1"><span class="text-xl">ğŸ“</span>è³‡è¨Š</button>
    <button @click="tab='contact'" :class="tab==='contact'?'text-emerald-600 scale-110':''" class="flex flex-col items-center gap-1"><span class="text-xl">ğŸ“</span>è¯çµ¡</button>
  </div>

  <div v-if="activeModal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center p-6">
    <div class="modal-content w-full max-w-sm rounded-[2rem] p-6 space-y-4 animate-fade-in max-h-[90vh] overflow-y-auto flex flex-col">
      <h3 class="text-center font-bold text-gray-700 shrink-0">{{ modalTitle }}</h3>
      
      <div v-if="['addItem','addList','editList'].includes(activeModal)" class="shrink-0">
        <label v-if="activeModal==='editList'" class="text-[10px] text-gray-400 block mb-1">é¸æ“‡æ¸…å–®</label>
        <select v-if="activeModal==='editList'" v-model="modalSelectedList" class="w-full bg-white/50 border rounded-xl p-3 text-sm mb-3">
            <option v-for="(_, name) in itemLists" :key="name" :value="name">{{ name }}</option>
        </select>
        <label class="text-[10px] text-gray-400 block mb-1">{{ modalInputLabel }}</label>
        <input v-model="modalInput" :placeholder="modalPlaceholder" class="w-full bg-white/50 border rounded-xl p-3 text-sm outline-none focus:ring-2 ring-purple-200" />
      </div>

      <div v-if="activeModal === 'removeList'" class="space-y-4 shrink-0">
        <p class="text-xs text-center text-gray-500">è«‹é¸å–è¦ç§»é™¤çš„æ¸…å–®ï¼š</p>
        <div class="max-h-40 overflow-y-auto space-y-2">
            <div v-for="(_, name) in itemLists" :key="name" @click="modalSelectedList = name"
                 :class="modalSelectedList === name ? 'bg-rose-100 border-rose-300' : 'bg-white/50 border-gray-100'"
                 class="p-3 rounded-xl border text-sm cursor-pointer transition-all">
              {{ name }}
            </div>
        </div>
      </div>

      <div v-if="activeModal === 'editPhotoList'" class="space-y-3 flex-1 overflow-hidden flex flex-col">
         <input v-model="currentPhotoList.title" placeholder="åˆ—è¡¨æ¨™é¡Œ" class="w-full bg-gray-100 rounded-xl p-3 text-sm font-bold shrink-0">
         <div class="flex-1 overflow-y-auto space-y-2 pr-1">
           <div v-for="(g, idx) in currentPhotoList.groups" :key="idx" class="flex gap-2 items-center bg-white/50 p-2 rounded-lg border">
             <input v-model="g.name" class="flex-1 bg-transparent text-xs" placeholder="åç¨±">
             <input v-model="g.count" type="number" class="w-10 bg-transparent text-xs text-center" placeholder="äººæ•¸">
             <select v-model="g.cat" class="text-[10px] bg-gray-100 rounded">
               <option value="other">å…¶ä»–</option><option value="male">ç”·å®¶</option><option value="female">å¥³å®¶</option>
             </select>
             <button @click="removePhotoGroup(idx)" class="text-red-400">âœ•</button>
           </div>
           <button @click="addPhotoGroup" class="text-xs text-indigo-500 font-bold w-full text-center py-2">+ æ–°å¢åˆ†çµ„</button>
         </div>
         <div class="pt-2 border-t flex justify-between shrink-0">
           <button @click="deletePhotoList" class="text-red-500 text-xs font-bold">åˆªé™¤æ­¤åˆ—è¡¨</button>
         </div>
      </div>

      <div v-if="activeModal === 'editSeatTable' && currentTable" class="space-y-3 flex-1 overflow-hidden flex flex-col">
          <div class="grid grid-cols-4 gap-2 shrink-0">
              <div class="col-span-1">
                  <label class="text-[9px] text-gray-400 pl-1">æ¡Œè™Ÿ</label>
                  <input v-model.number="currentTable.id" type="number" class="w-full bg-gray-100 rounded-xl p-2 text-center text-sm font-bold">
              </div>
              <div class="col-span-3">
                  <label class="text-[9px] text-gray-400 pl-1">åˆ†é¡åç¨±</label>
                  <input v-model="currentTable.category" class="w-full bg-gray-100 rounded-xl p-2 text-sm">
              </div>
          </div>
          
          <div class="flex-1 overflow-y-auto space-y-2 pr-1 border-t border-gray-100 pt-2">
              <div v-for="(g, idx) in currentTable.guests" :key="idx" class="flex gap-2 items-center bg-white/60 p-2 rounded-lg border border-gray-100">
                  <div class="flex-1 grid grid-cols-2 gap-2">
                      <input v-model="g.name" placeholder="å§“å" class="bg-transparent text-xs font-bold text-gray-700 outline-none border-b border-dashed border-gray-300 py-1">
                      <input v-model="g.role" placeholder="èº«ä»½ / è·ä½" class="bg-transparent text-xs text-gray-500 outline-none border-b border-dashed border-gray-300 py-1">
                  </div>
                  <button @click="removeGuestFromCurrent(idx)" class="text-red-400 text-xs px-2 transition-colors">âœ•</button>
              </div>
              <button @click="addGuestToCurrent" class="w-full py-2 text-[10px] text-indigo-500 font-bold bg-indigo-50/50 rounded-lg dashed-border mt-2 hover:bg-indigo-100 transition">+ æ–°å¢è³“å®¢</button>
          </div>
          <div class="pt-2 border-t flex justify-between items-center shrink-0">
            <button @click="deleteCurrentTable" class="text-rose-500 text-xs font-bold px-2 py-1 rounded hover:bg-rose-50">ğŸ—‘ï¸ åˆªé™¤æ•´æ¡Œ</button>
          </div>
      </div>

      <div v-if="activeModal === 'editContact' || activeModal === 'addContact'" class="space-y-3 shrink-0">
          <input v-model="currentContact.name" placeholder="å§“å (å¦‚: å¼µä¸‰)" class="w-full bg-white/50 border rounded-xl p-3 text-sm font-bold outline-none focus:ring-2 ring-emerald-200">
          <input v-model="currentContact.role" placeholder="èº«ä»½ / è·ä½ (å¦‚: æ”å½±å¸«, å§Šå¦¹)" class="w-full bg-white/50 border rounded-xl p-3 text-sm outline-none focus:ring-2 ring-emerald-200">
          <input v-model="currentContact.phone" placeholder="é›»è©±è™Ÿç¢¼ (å¦‚: 98765432)" type="tel" class="w-full bg-white/50 border rounded-xl p-3 text-sm outline-none focus:ring-2 ring-emerald-200">
          <select v-model="currentContact.side" class="w-full bg-white/50 border rounded-xl p-3 text-sm outline-none focus:ring-2 ring-emerald-200">
             <option value="" disabled>é¸æ“‡åˆ†é¡ (å®¶ç³»)</option>
             <option v-for="c in contactCats" :key="c" :value="c">{{ c }}</option>
          </select>
      </div>
      
      <div class="flex justify-between items-center pt-2 shrink-0 border-t border-gray-100">
        <button @click="closeModal" class="text-gray-400 font-bold text-sm px-4">å–æ¶ˆ</button>
        <button @click="handleModalConfirm" :class="(activeModal==='removeList')?'bg-rose-500':'bg-indigo-600'" class="text-white px-6 py-2 rounded-xl font-bold text-sm shadow-md transition-all active:scale-95">
          {{ modalConfirmText }}
        </button>
      </div>
    </div>
  </div>

  <div v-if="showScheduleModal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="modal-content w-full max-w-sm rounded-[2rem] p-6 space-y-4 overflow-y-auto max-h-[85vh]">
      <h3 class="text-center font-black text-gray-700">{{ currentSchedule.id?'ç·¨è¼¯è¡Œç¨‹':'æ–°å¢è¡Œç¨‹' }}</h3>
      <div class="grid grid-cols-2 gap-2">
        <div class="flex flex-col">
            <label class="text-[10px] text-gray-400 mb-1">é–‹å§‹</label><input type="time" step="60" v-model="currentSchedule.startTime" class="w-full bg-white/50 border rounded-xl px-2 p-3 text-sm time-input-ios-fix"/></div>
        <div class="flex flex-col">
            <label class="text-[10px] text-gray-400 mb-1">çµæŸ</label><input type="time" step="60" v-model="currentSchedule.endTime" class="w-full bg-white/50 border rounded-xl px-2 p-3 text-sm time-input-ios-fix"/></div>
      </div>
      <input v-model="currentSchedule.place" class="w-full bg-white/50 border rounded-xl p-3 text-sm" placeholder="åœ°é»"/>
      <input v-model="currentSchedule.title" class="w-full bg-white/50 border rounded-xl p-3 text-sm font-bold" placeholder="è¡Œç¨‹æ¨™é¡Œ"/>
      <textarea v-model="currentSchedule.tasks" class="w-full bg-white/50 border rounded-xl p-3 text-sm h-16" placeholder="ä»»å‹™æ¸…å–® (é¸å¡«)"></textarea>
      <textarea v-model="currentSchedule.items" class="w-full bg-white/50 border rounded-xl p-3 text-sm h-16" placeholder="ç‰©è³‡æ¸…å–® (é¸å¡«)"></textarea>
      <textarea v-model="currentSchedule.note" class="w-full bg-white/50 border rounded-xl p-3 text-sm h-16" placeholder="å‚™è¨» (é¸å¡«)"></textarea>
      <div class="space-y-2">
  <label class="text-[10px] text-gray-400 block">è² è²¬äºº (å¯é¸å¤šå€‹)</label>
  <div class="flex flex-wrap gap-2">
      <div v-for="p in allExecutors" :key="p" @click="togglePerson(p)"
           :class="currentSchedule.people && currentSchedule.people.includes(p) ? getPersonColor(p) + ' text-white shadow-md' : 'bg-gray-100 text-gray-600'"
           class="px-3 py-1 text-xs rounded-full font-bold transition cursor-pointer flex items-center gap-1">
        
        <span class="w-2 h-2 rounded-full" 
              :class="currentSchedule.people && currentSchedule.people.includes(p) ? 'bg-white' : getPersonColor(p)">
        </span>
        
        {{ p }}
      </div>
  </div>
</div>
      <div class="flex justify-end gap-4 pt-4">
        <button @click="showScheduleModal=false" class="text-gray-400 font-bold text-sm">å–æ¶ˆ</button>
        <button @click="saveSchedule" class="bg-purple-500 text-white px-6 py-2 rounded-xl font-bold text-sm">å„²å­˜</button>
      </div>
    </div>
  </div>

  <div v-if="showGoldModal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="modal-content w-full max-w-sm rounded-[2rem] p-6 space-y-4 overflow-y-auto max-h-[85vh]">
      <h3 class="text-center font-black text-gray-700">ç®¡ç†é‡‘å™¨</h3>
      
      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">ç·¨è™Ÿ (No.)</label>
        <div class="w-full bg-gray-100 text-gray-500 border rounded-xl p-3 text-sm font-mono">#{{ currentGold.no }}</div>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">é¡åˆ¥</label>
        <div class="flex flex-wrap gap-2">
            <button v-for="cat in goldCategories" :key="cat" @click="currentGold.category = cat"
                    :class="currentGold.category === cat ? 'bg-amber-500 text-white shadow-md' : 'bg-gray-100 text-gray-600'"
                    class="px-3 py-2 rounded-lg text-xs font-bold transition">
                {{ cat }}
            </button>
        </div>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">æ•¸é‡</label>
        <input type="number" v-model.number="currentGold.qty" class="w-full bg-white/50 border rounded-xl p-3 text-sm font-bold" min="1" />
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">å®¶ç³»</label>
        <div class="flex gap-2">
            <button @click="currentGold.side='ç”·å®¶'" :class="currentGold.side==='ç”·å®¶'?'btn-gradient-blue text-white shadow-md':'bg-gray-100 text-gray-500'" class="flex-1 py-3 rounded-xl text-xs font-bold transition">ğŸ¤µğŸ»â€â™‚ï¸ ç”·å®¶</button>
            <button @click="currentGold.side='å¥³å®¶'" :class="currentGold.side==='å¥³å®¶'?'btn-gradient-pink text-white shadow-md':'bg-gray-100 text-gray-500'" class="flex-1 py-3 rounded-xl text-xs font-bold transition">ğŸ‘°ğŸ»â€â™€ï¸ å¥³å®¶</button>
        </div>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">é€ç¦®äºº</label>
        <input v-model="currentGold.from" class="w-full bg-white/50 border rounded-xl p-3 text-sm" placeholder="å¦‚: å«²å«²"/>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">åœ–ç‰‡</label>
        <div class="flex items-center gap-2 bg-gray-50 p-2 rounded-xl border border-dashed border-gray-300">
          <input type="file" @change="loadGoldImage" class="text-[10px] text-gray-500 w-full file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-xs file:bg-amber-100 file:text-amber-700">
        </div>
        <img v-if="currentGold.image" :src="currentGold.image" class="w-full h-32 object-cover rounded-xl border border-white shadow-sm mt-2">
      </div>

      <div class="flex justify-end gap-4 pt-4 border-t border-gray-100 mt-2">
        <button @click="showGoldModal=false" class="text-gray-400 font-bold text-sm">å–æ¶ˆ</button>
        <button @click="saveGold" class="bg-amber-500 text-white px-6 py-2 rounded-xl font-bold text-sm shadow-md active:scale-95 transition">å„²å­˜</button>
      </div>
    </div>
  </div>

  <div v-if="showGiftModal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="modal-content w-full max-w-sm rounded-[2rem] p-6 space-y-4 overflow-y-auto max-h-[85vh]">
      <h3 class="text-center font-black text-gray-700">ç®¡ç†åˆ©æ˜¯/ç¦®ç‰©</h3>
      
      <div>
         <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">ç·¨è™Ÿ (No.)</label>
         <div class="w-full bg-gray-100 text-gray-500 border rounded-xl p-3 text-sm font-mono">#{{ currentGift.no }}</div>
      </div>

      <div class="flex bg-gray-100 rounded-xl p-1 gap-1">
        <button @click="currentGift.type='åˆ©æ˜¯'" :class="currentGift.type==='åˆ©æ˜¯'?'btn-gradient-red text-white shadow-sm':'text-gray-400 hover:bg-gray-200'" class="flex-1 py-2 rounded-lg text-xs font-bold transition">ğŸ§§ åˆ©æ˜¯</button>
        <button @click="currentGift.type='ç¦®ç‰©'" :class="currentGift.type==='ç¦®ç‰©'?'btn-gradient-mint text-white shadow-sm':'text-gray-400 hover:bg-gray-200'" class="flex-1 py-2 rounded-lg text-xs font-bold transition">ğŸ ç¦®ç‰©</button>
      </div>

      <div v-if="currentGift.type==='ç¦®ç‰©'" class="animate-fade-in">
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">ç¦®ç‰©æè¿°</label>
        <input v-model="currentGift.desc" class="w-full bg-white/50 border rounded-xl p-3 text-sm focus:ring-2 ring-emerald-200 outline-none" placeholder="å¦‚: Dysoné¢¨ç­’"/>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">æ•¸é‡</label>
        <input type="number" v-model.number="currentGift.qty" class="w-full bg-white/50 border rounded-xl p-3 text-sm font-bold" min="1"/>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">å®¶ç³»</label>
        <div class="flex gap-2">
            <button @click="currentGift.side='ç”·å®¶'" :class="currentGift.side==='ç”·å®¶'?'btn-gradient-blue text-white shadow-md':'bg-gray-100 text-gray-500'" class="flex-1 py-3 rounded-xl text-xs font-bold transition">ğŸ¤µğŸ»â€â™‚ï¸ ç”·å®¶</button>
            <button @click="currentGift.side='å¥³å®¶'" :class="currentGift.side==='å¥³å®¶'?'btn-gradient-pink text-white shadow-md':'bg-gray-100 text-gray-500'" class="flex-1 py-3 rounded-xl text-xs font-bold transition">ğŸ‘°ğŸ»â€â™€ï¸ å¥³å®¶</button>
        </div>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">é€ç¦®äºº</label>
        <input v-model="currentGift.from" class="w-full bg-white/50 border rounded-xl p-3 text-sm" placeholder="å¦‚: John Lee"/>
      </div>

      <div>
        <label class="text-[10px] text-gray-400 font-bold pl-1 mb-1 block">ç¸½é‡‘é¡ / åƒ¹å€¼</label>
        <div class="relative">
            <span class="absolute left-4 top-3 text-gray-400 font-bold">$</span>
            <input type="number" v-model.number="currentGift.amount" class="w-full bg-white/50 border rounded-xl p-3 pl-8 text-sm font-mono font-bold text-rose-600 outline-none focus:ring-2 ring-rose-200" placeholder="0"/>
        </div>
      </div>

      <div class="flex justify-end gap-4 pt-4 border-t border-gray-100 mt-2">
        <button @click="showGiftModal=false" class="text-gray-400 font-bold text-sm">å–æ¶ˆ</button>
        <button @click="saveGift" class="bg-rose-500 text-white px-6 py-2 rounded-xl font-bold text-sm shadow-md active:scale-95 transition">å„²å­˜</button>
      </div>
    </div>
  </div>

</div>

<script>
const { createApp, ref, computed } = Vue

createApp({
  data() {
    return {
      tab: 'schedule',
      infoTab: 'items',
      pageTitle: 'Wedding Planner',
      nowTick: Date.now(),
      
      responsibleFilter: 'å…¨éƒ¨',
      isFilterCollapsed: true,
      customResponsibleOrder: [
            'æ–°å¨˜', 'Vicky', 'Bonnie', 'Ling', 'Anna', 'Chelsie', 
            'æ–°éƒ', 'ç™¼', 'å²', 'Jeff', 'Jayden', 'David Lo', 'TC', 
            'æ€¡åª½', 'æ€¡çˆ¸', 'ç¦§åª½', 'ç¦§çˆ¸'
        ],

      // === ç‰©è³‡æ¸…å–® ===
      itemLists: { 
        "ä¸Šé ­(å»Hyatt)": [{name: "æ‰æŸ", checked: false}, {name: "ç¢ŒæŸšè‘‰", checked: false}, {name: "é¾é³³é¤…", checked: false}, {name: "æ°´æœ", checked: false}, {name: "åˆ©æ˜¯", checked: false}, {name: "ç´…æ±å¸ƒ", checked: false}, {name: "ç´…æ‹–é‹", checked: false}, {name: "ç´…ç¡è¡£", checked: false}, {name: "ä¸Šé ­ç”¨å“", checked: false}, {name: "è’¸æ°£ç†¨æ–—", checked: false}],
        "å‡ºå…¥é–€(å»Hyatt) å¥³å®¶": [{name: "HKçª—å›å­—è²¼", checked: false}, {name: "å›å­—è£é£¾", checked: false}, {name: "å½±ç›¸ç”¨é–ƒç‰‡", checked: false}, {name: "ç´™æ¯", checked: false}, {name: "é¦™ç‰‡èŒ¶åŒ…", checked: false}, {name: "è“®å­ã€ç´…æ£—", checked: false}, {name: "æ””é–€èŠ±çƒ", checked: false}, {name: "é‡‘å™¨List", checked: false}, {name: "é‡‘å™¨Label", checked: false}, {name: "å§Šå§Šæ‰‹èŠ±", checked: false}, {name: "ç´…å‚˜", checked: false}, {name: "æ‰‡", checked: false}, {name: "æ¨½è£æ°´ x 12", checked: false}, {name: "æ”¶ç¦®List", checked: false}, {name: "é‡‘å™¨å¤§è¢‹", checked: false}, {name: "è£™è¤‚", checked: false}, {name: "è¤‚é‹", checked: false}, {name: "æ°£çƒ/æ°£æ³µ", checked: false}, {name: "æ•¬èŒ¶èŒ¶å…·(Hyatt)", checked: false}],
        "å‡ºå…¥é–€(å»Hyatt) ç”·å®¶": [{name: "å…„å¼Ÿè¥ŸèŠ±", checked: false}, {name: "æ–°éƒè¥ŸèŠ±", checked: false}, {name: "é¦¬è¤‚", checked: false}, {name: "èŠ±çƒ", checked: false}],
        "ç¦®æœ(æ•™å ‚+æ™šå®´)": [{name: "æ™šå®´å©šç´—", checked: false}, {name: "æ™šå®´é£¾å“", checked: false}, {name: "é«˜è¸­é‹ (æ™šå®´)", checked: false}, {name: "æ³¢é‹ (å½±ç›¸ç”¨)", checked: false}, {name: "æ•™å ‚ç¦®æœ", checked: false}, {name: "æ•™å ‚é£¾å“", checked: false}, {name: "é ˜å¸¶/ç…²å‘” (3å¥—)", checked: false}, {name: "çš®é‹", checked: false}, {name: "è¥ªå­ (ç™½/é»‘)", checked: false}, {name: "å…§è¡£", checked: false}, {name: "å©šæˆ’ (2æš)", checked: false}],
        "åŒ–å¦ç‰©è³‡": [{name: "MUAçš„åˆ©æ˜¯", checked: false}, {name: "MUAçš„åˆé¤", checked: false}, {name: "MUAçš„æ¤…å­", checked: false}, {name: "åŒ–å¦ç‡ˆ (å¦‚æœMUAæœ‰å¸¶)", checked: false}, {name: "åŒ–å¦æ°´ã€ä¹³æ¶² (ä¿é¤Š)", checked: false}, {name: "é¢è†œ", checked: false}, {name: "é«®å¤¾", checked: false}, {name: "å‡ç«æ¯›", checked: false}, {name: "éš±å½¢çœ¼é¡", checked: false}, {name: "æ½¤å”‡è†", checked: false}],
        "æ™šå®´/æ•™å ‚ä½ˆç½®": [{name: "ç°½åå¸ƒ/ç°¿/ç­†", checked: false}, {name: "æ²¹ç•«", checked: false}, {name: "è¿è³“å€è£é£¾", checked: false}, {name: "Photo Boothé“å…·", checked: false}, {name: "å›ç¦®ç¦®ç‰© (å©šå®´)", checked: false}, {name: "ç³–æœ/æœ±å¤åŠ›", checked: false}, {name: "æ•™å ‚ä½ˆç½®ç‰©è³‡", checked: false}, {name: "çµ²å¸¶", checked: false}],
        "é›œé …": [{name: "æ‰‹æ©Ÿå……é›»å™¨", checked: false}, {name: "ç›¸æ©Ÿå……é›»å™¨", checked: false}, {name: "æ—…è¡Œç†¨æ–—", checked: false}, {name: "é‡ç·šåŒ…", checked: false}, {name: "é†«è—¥ç®± (èƒƒè—¥ã€é ­ç—›è—¥)", checked: false}, {name: "å³æ£„ç‰™åˆ·", checked: false}, {name: "æ¼±å£æ°´", checked: false}, {name: "é›»è…¦", checked: false}],
        "æ–‡å…·": [{name: "å‰ªåˆ€ x 2", checked: false}, {name: "ğ ¹åˆ€ x 2", checked: false}, {name: "å°ç®±è† ç´™ x 2", checked: false}, {name: "çšºç´‹è†  x 3", checked: false}, {name: "é›™é¢è† ç´™ x 2", checked: false}, {name: "ç„¡ç—•è† ç´™ x 2", checked: false}, {name: "Blue tape x 2", checked: false}, {name: "åŸå­ç­† x 4", checked: false}, {name: "é»‘è‰²marker x 2", checked: false}, {name: "æ‰£é‡ x 1ç›’", checked: false}, {name: "é‡˜æ›¸æ©Ÿ x 1", checked: false}, {name: "è¬èƒ½è†  x 2", checked: false}, {name: "Labelç´™ x 1ç–Š", checked: false}, {name: "ç´…ç¹© x 1æ²", checked: false}],
        "æ–°å¨˜è¢‹": [{name: "éŠ€åŒ…", checked: false}, {name: "ç´™å·¾", checked: false}, {name: "å§Šå¦¹åˆ©æ˜¯", checked: false}, {name: "MUAåˆ©æ˜¯", checked: false}, {name: "å……é›»å™¨", checked: false}, {name: "å……é›»ç·š", checked: false}, {name: "Conæ°´", checked: false}, {name: "Con", checked: false}, {name: "è—¥", checked: false}, {name: "Må·¾", checked: false}, {name: "ç³–", checked: false}, {name: "çœ¼é¡ç›’(é€£çœ¼é¡)", checked: false}],
        "æ–°éƒè¢‹": [{name: "éŠ€åŒ…", checked: false}, {name: "é›»è©±", checked: false}, {name: "ç´™å·¾", checked: false}, {name: "å…„å¼Ÿåˆ©æ˜¯", checked: false}, {name: "é–‹é–€åˆ©æ˜¯", checked: false}, {name: "æ”å½±å¸«åˆ©æ˜¯", checked: false}, {name: "é…’åº—å“¡å·¥åˆ©æ˜¯", checked: false}, {name: "å‚™ç”¨åˆ©æ˜¯", checked: false}, {name: "å……é›»å™¨", checked: false}, {name: "å……é›»ç·š", checked: false}, {name: "ç³–", checked: false}]
      },
      expandedLists: [],
      activeModal: null,
      modalTitle: '',
      modalInput: '',
      modalInputLabel: '',
      modalPlaceholder: '',
      modalConfirmText: 'ç¢ºèª',
      modalSelectedList: '',
      showManageSubMenu: false,
      currentPhotoList: { title: '', groups: [] },
      photoEditingIndex: -1,
      collapsedPhotoGroups: {},

      // === åº§ä½è¡¨è³‡æ–™ ===
      seatTables: [
        {
          id: 1, category: "ä¸»å®¶å¸­ (å¥³å®¶)",
          guests: [
            
          ]
        },
        {
          id: 2, category: "ä¸»å®¶å¸­ (ç”·å®¶)",
          guests: [
            ]
        },
        {
          id: 3, category: "å¥³å®¶è¦ªå‹ã€å§Šå¦¹",
          guests: [
            ]
        },
        {
          id: 4, category: "ç”·å®¶è¦ªæˆš",
          guests: [
            ]
        },
        {
          id: 5, category: "ç”·å®¶åª½åª½è¦ªæˆš",
          guests: [
            ]
        },
        {
          id: 6, category: "å¥³å®¶è¦ªæˆš",
          guests: [
            ]
        },
        {
          id: 7, category: "å¥³å®¶åª½åª½è¦ªå‹ã€å§Šå¦¹",
          guests: [
            ]
        },
        {
          id: 8, category: "å¥³å®¶åª½åª½è¦ªæˆš",
          guests: [
            ]
        },
        {
          id: 9, category: "ç”·å®¶çˆ¸çˆ¸åŒäº‹",
          guests: [
            {name:"", role:"æ„›ç¦®ä¿¡åŒäº‹", present:false}
          ]
        },
        {
          id: 10, category: "ä¸­å­¸è€å¸«ã€æ–°å¨˜æ•™æœƒ",
          guests: [
            ]
        },
        {
          id: 11, category: "æ–°éƒæ•™æœƒ",
          guests: [
            ]
        },
        {
          id: 12, category: "æ–°éƒæ•™æœƒ (çºŒ)",
          guests: [
            ]
        },
        {
          id: 13, category: "æ–°å¨˜åŒå­¸ã€åŒäº‹",
          guests: [
            ]
        }
      ],
      seatSearch: '',
      currentTable: null,
      editingTableIndex: -1,

      // === è¯çµ¡äººè³‡æ–™ ===
      contactSearch: '',
      
      // === è¡Œç¨‹è³‡æ–™ (å·²å¾ Excel åŒ¯å…¥ä¸¦æ ¼å¼åŒ–) ===
      scheduleList: [
        {
            id: 1,
            startTime: '05:30',
            endTime: '',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'ã€æ–°å¨˜ã€‘ åŒ–å¦ - å‡ºé–€æˆ¿',
            tasks: 'ã€æ–°å¨˜ã€‘æ¯”åŒ–å¦å¸«åˆ©æ˜¯',
            items: 'ç´…ç¡è¡£\nåŒ–å¦å¸«åˆ©æ˜¯',
            note: '',
            people: ['æ–°å¨˜'],
            expanded: false
        },
        {
            id: 2,
            startTime: '06:00',
            endTime: '06:45',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'ã€æ€¡åª½ã€å§Šå¦¹ã€‘åŒ–å¦ - å‡ºé–€æˆ¿',
            tasks: 'ã€æ€¡åª½ã€‘åŒ–å¦\nã€Vickyã€‘åŒ–å¦+æˆ´æ‰‹èŠ±',
            items: 'æ‰‹èŠ±',
            note: '',
            people: ['æ€¡åª½','Vicky'],
            expanded: false
        },
        {
            id: 3,
            startTime: '06:45',
            endTime: '07:30',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'ã€æ€¡åª½ã€å§Šå¦¹ã€‘åŒ–å¦ã€æº–å‚™',
            tasks: 'ã€Bonnieã€Lingã€‘åŒ–å¦+æˆ´æ‰‹èŠ±\nã€æ€¡åª½ã€‘æº–å‚™é‡‘å™¨ä¿¾æ”å½±å¸«å½±ç›¸\nã€Vickyã€‘æº–å‚™å¸–(ä¸­è¥¿å¼å„1å¼µ)+æˆ’æŒ‡+è¤‚+è¤‚é‹ä¿¾æ”å½±å¸«å½±\nã€Annaã€Chelsieã€‘æº–å‚™æ•¬èŒ¶ç‰©è³‡+ç…²æ°´+æ¸…æ´—',
            items: 'å§Šå¦¹æ‰‹èŠ±\næ•¬èŒ¶ç‰©è³‡(èŒ¶å…·ã€ç´…æ£—ã€è“®å­ã€èŒ¶è‘‰ã€ç´™æ¯ã€è·ªå¢Š1å¥—)\nè¤‚ è¤‚é‹',
            note: '',
            people: ['æ€¡åª½','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 4,
            startTime: '07:30',
            endTime: '08:15',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'ã€å§Šå¦¹ã€‘åŒ–å¦ã€æº–å‚™',
            tasks: 'ã€Chelsie ã€Annaã€‘åŒ–å¦+æˆ´æ‰‹èŠ±\nã€Bonnieã€Lingã€‘é å‚™ç©æ–°éƒç‰©è³‡',
            items: 'å§Šå¦¹æ‰‹èŠ±\nç©æ–°éƒç‰©è³‡',
            note: '',
            people: ['æ€¡åª½','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 5,
            startTime: '08:30',
            endTime: '09:30',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'ã€æ–°å¨˜ã€å§Šå¦¹ã€å®¶äººã€‘æ‹æ›è¤‚ç…§',
            tasks: 'ã€æ–°å¨˜ã€‘æ´¾å§Šå¦¹åˆ©æ˜¯+æœƒæ’’ç´™ç¢\nã€æ€¡åª½ã€‘å¹«æ–°å¨˜è‘—ä¸Šèº«+è¬›å¿ƒåº•è©±\nã€å§Šå¦¹ã€‘å¹«æ–°å¨˜è‘—ä¸‹èº«',
            items: 'è¤‚\nå§Šå¦¹åˆ©æ˜¯',
            note: '',
            people: ['æ–°å¨˜','æ€¡åª½','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 6,
            startTime: '08:30',
            endTime: '09:00',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å®¢æˆ¿',
            title: 'ã€æ–°éƒã€‘ åŒ–å¦',
            tasks: '',
            items: 'æˆ¿å¡',
            note: '',
            people: ['æ–°éƒ'],
            expanded: false
        },
        {
            id: 7,
            startTime: '09:00',
            endTime: '09:45',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å®¢æˆ¿',
            title: 'ã€ç¦§åª½ã€‘ åŒ–å¦',
            tasks: '',
            items: '',
            note: '',
            people: ['ç¦§åª½'],
            expanded: false
        },
        {
            id: 8,
            startTime: '09:15',
            endTime: '10:00',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - é…’åº—æ¨“ä¸‹',
            title: 'ã€å…„å¼Ÿã€‘é›†åˆ+åˆç…§',
            tasks: 'ã€æ”å½±å¸«Calvin Makã€‘åˆ°é…’åº—æ¨“ä¸‹\nã€æ–°éƒã€‘æ¯”æ”å½±å¸«+å…„å¼Ÿåˆ©æ˜¯+èŠ±çƒ\nã€å…„å¼Ÿã€‘å»ç”·å®¶æˆ¿æ”¾è¢‹+æˆ´è¥ŸèŠ±',
            items: 'å…„å¼Ÿåˆ©æ˜¯\næ”å½±å¸«åˆ©æ˜¯\nå…„å¼Ÿè¥ŸèŠ±',
            note: 'ã€ç¦§çˆ¸ã€‘äº¤æˆ¿å¡æ¯”å…„å¼Ÿ',
            people: ['æ–°éƒ','ç¦§çˆ¸','Jeff','Jayden','David Lo','å²','TC','ç™¼'],
            expanded: false
        },
        {
            id: 9,
            startTime: '10:00',
            endTime: '10:10',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'åˆ°é”å¥³å®¶æˆ¿',
            tasks: 'ã€æ–°éƒã€‘æ¯”é–‹é–€åˆ©æ˜¯\nã€Vickyã€Chelsieã€‘æ””é–€èŠ±çƒ\nã€Annaã€‘Facetime æ–°å¨˜',
            items: 'é–‹é–€åˆ©æ˜¯\nèŠ±çƒã€æ””é–€èŠ±çƒ',
            note: '',
            people: ['æ–°éƒ','Vicky','Chelsie','Anna'],
            expanded: false
        },
        {
            id: 10,
            startTime: '10:00',
            endTime: '10:20',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'ç©æ–°éƒ',
            tasks: 'ã€Lingã€Bonnieã€‘HoldéŠæˆ²\nã€æ–°éƒã€å…„å¼Ÿã€‘ä¸€é½Šç©',
            items: 'éŠæˆ²ç‰©è³‡',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','Jeff','Jayden','David Lo','å²','TC','ç™¼','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 11,
            startTime: '10:20',
            endTime: '10:35',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'æ–°å¨˜å‡ºé–€',
            tasks: 'ã€æ–°éƒã€‘ æ„›çš„å®£è¨€\nã€å®¶äººã€‘å¸¶ã€æ–°å¨˜ã€‘å‡ºé–€',
            items: '',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','æ€¡åª½','æ€¡çˆ¸'],
            expanded: false
        },
        {
            id: 12,
            startTime: '10:35',
            endTime: '10:55',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'å¥³å®¶æ•¬èŒ¶ã€å®¶åº­åˆç…§',
            tasks: 'ã€Annaã€‘å‚™èŒ¶+æ·»èŒ¶/æ”¾ç´…æ£—è“®å­\nã€Vickyã€‘æ‹æ‰˜ç›¤+ä¸Šé¡éèŒ¶\nã€Bonnieã€‘è¬›å‰åˆ©èªªè©±\nã€Lingã€‘å½±é‡‘å™¨(é€£é•·è¼©æ¨£)+è²¼label\nã€Chelsieã€‘è¨˜éŒ„åˆ©æ˜¯+è¢‹åˆ©æ˜¯+æˆ´é‡‘å™¨',
            items: 'æ•¬èŒ¶ç”¨å“\nLabel\né‡‘å™¨è¢‹\nåˆ©æ˜¯è¢‹',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','æ€¡åª½','æ€¡çˆ¸', 'Anna', 'Vicky', 'Bonnie', 'Ling','Chelsie'],
            expanded: false
        },
        {
            id: 13,
            startTime: '10:55',
            endTime: '11:30',
            place: 'æ²™ç”°å‡±æ‚…é…’åº— - å‡ºé–€æˆ¿',
            title: 'å‡ºé–€+å…„å¼Ÿå§Šå¦¹åœ˜åˆç…§',
            tasks: 'ã€Vickyã€‘æ‹ç´…å‚˜',
            items: 'èŠ±çƒ\nç´…å‚˜',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜', 'Anna', 'Vicky', 'Bonnie', 'Ling','Chelsie','Jeff','Jayden','David Lo','å²','TC','ç™¼'],
            expanded: false
        },
        {
            id: 14,
            startTime: '11:25',
            endTime: '12:10',
            place: 'æ²™ç”°å‡±æ‚…é…’åº—',
            title: 'ç”·å®¶æ•¬èŒ¶',
            tasks: 'æ•¬èŒ¶ï¼ˆç”·å®¶é•·è¼©ï¼‰\nã€åŒ–å¦å¸«Candyã€‘åˆé¤\nã€Jeffã€Jaydenã€‘è·Ÿé€²åˆé¤12:45é€è‡³æº‹ç¥ï¼ˆ12äººä»½)\nã€Annaã€‘å‚™èŒ¶+æ·»èŒ¶/æ”¾ç´…æ£—è“®å­\nã€Vickyã€‘æ‹æ‰˜ç›¤+ä¸Šé¡éèŒ¶\nã€Bonnieã€‘è¬›å‰åˆ©èªªè©±\nã€Lingã€‘å½±é‡‘å™¨(é€£é•·è¼©æ¨£)+è²¼label\nã€Chelsieã€‘è¨˜éŒ„åˆ©æ˜¯+è¢‹åˆ©æ˜¯+æˆ´é‡‘å™¨',
            items: 'æ•¬èŒ¶ç”¨å“\nLabel\né‡‘å™¨è¢‹\nåˆ©æ˜¯è¢‹',
            note: 'æ•¬èŒ¶ã€1.ç¦§çˆ¸ã€ç¦§åª½+2.å«²+3.å©†+4.å§‘åª½+5.å¤§èˆ…çˆ¶+6.äºŒèˆ…çˆ¶ã€äºŒèˆ…æ¯+7.ç´°èˆ…çˆ¶ã€ç´°èˆ…æ¯+8.å¤§ä¼¯ã€ä¼¯å¨˜ã€‘',
            people: ['æ–°éƒ','æ–°å¨˜', 'Anna', 'Vicky', 'Bonnie', 'Ling','Chelsie','Jeff','Jayden','David Lo','å²','TC','ç™¼','ç¦§çˆ¸','ç¦§åª½'],
            expanded: false
        },
        {
            id: 15,
            startTime: '12:10',
            endTime: '12:15',
            place: 'æ²™ç”°å‡±æ‚…é…’åº—',
            title: 'æ”¶æ‹¾æˆ¿é–“',
            tasks: 'ã€Lingã€‘ä¿ç®¡é‡‘å™¨+å¹«æ‰‹é™¤é‡‘å™¨\nã€Chelsieã€‘ä¿ç®¡åˆ©æ˜¯+å¹«æ‰‹é™¤é‡‘å™¨\nã€Bonnieã€‘è¯çµ¡28åº§åˆ°é…’åº—æ¨“ä¸‹\nã€David Loã€‘æ”¶é›†æˆ¿å¡+Check Outå…©é–“æˆ¿\nã€å…„å¼Ÿã€‘æ‰€æœ‰ç‰©è³‡æ”¾ä¸Š28åº§',
            items: '',
            note: '',
            people: ['Bonnie', 'Ling','Chelsie','Jeff','Jayden','David Lo','å²','TC','ç™¼'],
            expanded: false
        },
        {
            id: 16,
            startTime: '11:00',
            endTime: '12:00',
            place: '',
            title: 'ã€åŒ¡ã€‘å¸¶å¥³å®¶è¦ªæˆšåˆé¤',
            tasks: '',
            items: '',
            note: '',
            people: [],
            expanded: false
        },
        {
            id: 17,
            startTime: '12:10',
            endTime: '13:10',
            place: 'æ–°é”æµ·æ¸¯',
            title: 'ã€æ¾„ã€‘å¸¶ç”·å®¶è¦ªæˆšåˆé¤',
            tasks: '',
            items: '',
            note: '',
            people: [],
            expanded: false
        },
        {
            id: 18,
            startTime: '12:15',
            endTime: '13:30',
            place: 'æº‹ç¥',
            title: 'åˆé¤ã€æ–°äººæ›è¡«è£œå¦',
            tasks: 'ã€å…„å¼Ÿå§Šå¦¹ã€(æ”å½±å¸«)ã€‘åˆé¤\nã€æ–°äººã€‘ æ›è¡«è£œå¦\nã€Chelsieã€‘æ”¾ä½æœæ—©åˆ©æ˜¯',
            items: 'å©šç´—\né»‘è¥¿è£',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜', 'Anna', 'Vicky', 'Bonnie', 'Ling','Chelsie','Jeff','Jayden','David Lo','å²','TC','ç™¼'],
            expanded: false
        },
        {
            id: 19,
            startTime: '13:45',
            endTime: '14:00',
            place: '',
            title: 'å‡ºç™¼å¤–å½±',
            tasks: 'ã€æ–°äººã€(æ”å½±å¸«ã€MUA)ã€‘ä¹˜28åº§åˆ°ä¸­å¤§',
            items: 'æ–°äººéš¨èº«è¢‹\nåœ˜é«”è¨ªå®¢å…¥æ ¡ç”³è«‹è¡¨',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜'],
            expanded: false
        },
        {
            id: 20,
            startTime: '14:00',
            endTime: '15:30',
            place: 'æœªåœ“æ¹–ã€ç¦®æ‹œå ‚é–€å¤–',
            title: 'å¤–å½±ã€è£œå¦',
            tasks: 'ã€å…„å¼Ÿå§Šå¦¹ã€‘ä¼‘æ¯',
            items: '',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜'],
            expanded: false
        },
        {
            id: 21,
            startTime: '14:45',
            endTime: '15:30',
            place: '',
            title: 'ã€é›™æ–¹å®¶äººã€å…„å¼Ÿå§Šå¦¹ã€‘ä¹˜28åº§åˆ°ä¸­å¤§',
            tasks: 'ã€Lingã€‘æ‹é‡‘å™¨\nã€Bonnieã€‘è¯çµ¡28åº§åˆ°æº‹ç¥æ¨“ä¸‹\nã€å…„å¼Ÿã€‘æ‹ç¦®æœ+è¡Œç¦®ç‰©è³‡+æ™šå®´ç‰©è³‡+æ–‡å…·\nã€å…„å¼Ÿå§Šå¦¹ã€‘æ¬ç‰©è³‡ä¸Š28åº§ï¼Œ14:45å‡ºè»Š',
            items: 'é‡‘å™¨\nç¦®æœ\næ•™å ‚ç‰©è³‡\næ™šå®´ç‰©è³‡\nåœ˜é«”è¨ªå®¢å…¥æ ¡ç”³è«‹è¡¨\nåœ˜é«”è¨ªå®¢å…¥æ ¡ç”³è«‹è¡¨',
            note: '',
            people: ['ç¦§åª½','ç¦§çˆ¸','Jeff','Jayden','David Lo','å²','TC','ç™¼','æ€¡åª½','æ€¡çˆ¸','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 22,
            startTime: '15:30',
            endTime: '15:45',
            place: 'ä¸­å¤§å´‡åŸºç¦®æ‹œå ‚',
            title: 'ä½ˆç½®æ‹›å¾…',
            tasks: 'ã€ç¦§åª½ã€æ€¡åª½ã€‘åç¬¬ä¸€æ’æœ€å‡ºä½ç½®\nã€æ”å½±å¸«ã€‘æ“ºè¨­æ”éŒ„å™¨æ+è½æ”éŒ„ä½ç½®ç°¡ä»‹+è‡ªè¡Œé…åˆæ”éŒ„ä½ç½®\nã€æ–°éƒã€‘æ‹›å¾…ä¾†è³“+æ¥å¾…åˆ°å ´ä¸»ç¦®äºº\nã€ç™¼ã€‘å”åŠ©æ–°éƒ+é å‚™æˆ’æŒ‡\nã€David Loã€Jeffã€Jaydenã€‘æ‹›å¾…ä¾†è³“+å«ç°½å+æ´¾å ´åˆŠ+ç¢ºå®šæ²’æœ‰æ”œå¸¶é£Ÿç‰©åŠé£²å“\nã€å²ã€‘ç°½å ´ï¼ˆå–è»Šç¥¨ã€å€Ÿæ–°å¨˜æˆ¿åŒ™ã€å€Ÿæ”å½±å¸«ç‰Œã€äº¤å ´åˆŠ5ä»½ã€é›†åˆæ”éŒ„äººå£«ä½œæ”éŒ„ä½ç½®ç°¡ä»‹ï¼‰\nã€TCã€‘æ­é–‹ç´å¸ƒ+æ‰“é–‹é‹¼ç´çŸ­æ¡¿\nã€æ–°å¨˜ã€‘ æ”¾é ­ç´—+è£œå¦\nã€Vickyã€‘å”åŠ©æ–°å¨˜\nã€Annaã€Chelsieã€‘æ¥å¾…è™•ä½ˆç½®\nã€Lingã€‘è¨˜éŒ„ç¦®ç‰©+è¢‹ç¦®ç‰©\nã€Bonnieã€‘å”åŠ©å®¶äººæˆ´è¥ŸèŠ±+æ¥å¾…åˆ°å ´ä¸»ç¦®äºº',
            items: 'é ­ç´—\næˆ’æŒ‡\næ±å¢Š\nç°½åç°¿ã€ç°½åç­†ã€ç­†\nç›¸ç°¿\nç›¸æ¶\næ²¹ç•«\nå ´åˆŠ\nç´è­œ\næ”¶ç¦®ç‰©è¢‹',
            note: 'åªè½æ•™å ‚ç‰©è³‡ï¼Œæ™šå®´ç‰©è³‡æ”¾è»Šä¸Š',
            people: ['æ–°éƒ','æ–°å¨˜','ç¦§åª½','Jeff','Jayden','David Lo','å²','TC','ç™¼','æ€¡åª½','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 23,
            startTime: '15:45',
            endTime: '15:50',
            place: 'ä¸­å¤§å´‡åŸºç¦®æ‹œå ‚',
            title: 'é›†åˆç¥ˆç¦±',
            tasks: 'ã€ç™¼ã€‘é›†åˆæ–°äººã€ é›™æ–¹çˆ¶æ¯ /ä¸»å©šäººã€ä¼´éƒä¼´å¨˜ã€ä¸»å¸­ã€ç¥ˆç¦±ã€è®€ç¶“ã€è¨“å‹‰ç­‰æ–¼æ–°å¨˜æˆ¿é›†åˆï¼Œä¸»ç¦®ç‰§å¸«ç°¡å–®ä½œæé»åŠç¦±å‘Š',
            items: '',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','ç¦§åª½','ç¦§çˆ¸','ç™¼','æ€¡åª½','æ€¡çˆ¸','Vicky'],
            expanded: false
        },
        {
            id: 24,
            startTime: '16:00',
            endTime: '16:55',
            place: 'ä¸­å¤§å´‡åŸºç¦®æ‹œå ‚',
            title: 'å…¸ç¦®',
            tasks: 'ã€æ–°éƒã€‘é€²å ´ã€ç‡ƒé»åˆå·¹ç‡­ã€å®£å¬ã€ã€æ–°å¨˜ã€‘é€²å ´å…± 4 åˆ†é˜\nã€æœƒçœ¾ã€‘è©©æ­Œ 5 åˆ†é˜\nã€æ´ªç©èŠã€‘ç¥ˆç¦±ã€ã€é™³æ˜†è³¸ã€ç‹ç¾ç²ã€‘è®€ç¶“å…± 3 åˆ†é˜\nã€é»ƒå‰å¼·ã€‘è¨“å‹‰ 8 åˆ†é˜\nã€é«˜åœ‹é›„ã€‘è­‰å©š 20 åˆ†é˜(ç°½å©šæ›¸æ™‚éŸ³æ¨‚ä¼´å¥ 2 åˆ†é˜)\n   - ã€æ–°äººã€ä¼´éƒã€ä¼´å¨˜ã€‘ä¸€åŒä¸Šå°ï¼Œä¼´éƒä¼´å¨˜ä¼å°ä¸Šå…©é‚Š\n   -ã€Œæˆ‘é¡˜æ„ã€\n   -ã€æ–°äººã€‘å³æ‰‹é›™æ¡ï¼Œå®£è®€èª“è©\n   -ã€ä¼´éƒã€‘éæˆ’æŒ‡ï¼Œã€æ–°äººã€‘äº¤æ›æˆ’æŒ‡\n   - ç°½ç´™ï¼šã€ä¼´éƒã€ä¼´å¨˜ã€‘åˆ°å°ä¸‹å¸¶ã€å…©ä½çˆ¸çˆ¸ã€‘ä¸Šå°\n   - ç°½ç´™é †åºï¼šã€æ–°éƒ >æ–°å¨˜>ç¦§çˆ¸>æ€¡çˆ¸ã€‘\nã€æœƒçœ¾ã€‘ç¥ç¦è©©æ­Œ 5 åˆ†é˜\nã€é«˜åœ‹é›„ã€‘ç¥ç¦ 1 åˆ†é˜\nã€æ–°éƒã€æ–°å¨˜ã€‘ç¦®æˆ 2 åˆ†é˜\nã€æ–°éƒã€æ–°å¨˜ã€‘è‡´è¬ 5 åˆ†é˜\n   -ã€Chelsieã€‘éä¸Šæ–°å¨˜é›»è©±\n*ç°½ç½²çµå©šè­‰æ›¸åŠæ‹ç…§å¾Œï¼Œ æ­£æœ¬å³æ™‚äº¤çµ¦ã€æ–°å¨˜ä¸»å©šäººã€‘',
            items: '',
            note: 'æˆ’æŒ‡\nç´è­œ\né›»è©±',
            people: ['æ–°éƒ','æ–°å¨˜','ç¦§çˆ¸','ç™¼','æ€¡çˆ¸','Vicky','Chelsie'],
            expanded: false
        },
        {
            id: 25,
            startTime: '16:55',
            endTime: '17:30',
            place: 'ä¸­å¤§å´‡åŸºç¦®æ‹œå ‚',
            title: 'æ‹ç…§+æ”¶æ‹¾',
            tasks: 'ã€Vickyã€Annaã€‘æ‹é½Šç¦®æœ\nã€Chelsieã€‘æ”¶æ‹¾æ–°å¨˜æˆ¿\nã€Lingã€‘æ‹é‡‘å™¨\nã€Bonnieã€‘è¯çµ¡28åº§17:30åˆ°æ­£é–€æˆ–æ–œè·¯ä¸‹æ–¹(TBC)\nã€TCã€‘é‚„åŸé‹¼ç´çŸ­æ¡¿\nã€David Loã€‘è¨ˆç®—æ‹ç…§æ™‚é–“+æé†’ä¸»å¸­\nã€ç™¼ã€‘æŒ‡ç¤ºé‹¼ç´ä½æ’éšŠ+å”åŠ©æ’ä½\nã€Jeffã€Jaydenã€‘æ”¶æ‹¾æ¥å¾…è™•å¾Œè¯çµ¡65åº§å¸æ©Ÿ\nã€å²ã€‘èˆ‡è·å“¡æª¢æŸ¥æ²’æœ‰ç•™ä¸‹ç‰©å“+é‚„æ–°å¨˜æˆ¿åŒ™',
            items: '',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','Jeff','Jayden','David Lo','å²','TC','ç™¼','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 26,
            startTime: '17:30',
            endTime: '18:15',
            place: '',
            title: 'é›¢å ´+å‰å¾€é€¸æ±',
            tasks: 'ã€Group 1: Vickyã€Annaã€Bonnieã€Chelsieã€Lingã€ç™¼ã€David Loã€æ”å½±å¸«ã€åŒ–å¦å¸«ã€‘ä¹˜28åº§å¾€é€¸æ± (å½±å®Œ16.TTTç›¸é€£ç‰©è³‡å³èµ°)\nã€Group 2: æ–°éƒã€æ–°å¨˜ã€TCã€é™³æ˜†è³¸ã€ç‹ç¾ç²ã€‘ä¹˜TCè»Šå¾€é€¸æ± (å½±å®Œç›¸å³èµ°)\nã€Group 3: å²ã€Jeffã€Jaydenã€åŒ¡ã€æ¾„ã€å®¶äººã€è³“å®¢ã€‘ä¹˜65åº§x2å¾€é€¸æ±\n  (Jeffã€JaydenæŒ‡ç¤ºå®¶äººåŠè³“å®¢ä¸Šè»Šå¾Œéš¨65åº§åˆ°é€¸æ±)',
            items: ' åœ˜é«”è¨ªå®¢å…¥æ ¡ç”³è«‹è¡¨\nTCè»Š\n28åº§ 65åº§x2\nè¡Œç¦®ç‰©è³‡\næ™šå®´ç‰©è³‡\nç¦®æœ',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','Jeff','Jayden','David Lo','å²','TC','ç™¼','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 27,
            startTime: '18:15',
            endTime: '18:45',
            place: 'é€¸æ±Maggie',
            title: 'è£œå¦+ä½ˆç½®',
            tasks: 'ã€æ–°å¨˜ã€‘è£œå¦\nã€ç¦§åª½ã€‘18:30è£œå¦+æ›è£™\nã€Vickyã€‘å”åŠ©æ–°å¨˜\nã€Annaã€Chelsieã€‘æ¥å¾…è™•ä½ˆç½®\nã€Lingã€‘åˆ°æ–°å¨˜æˆ¿é–é‡‘å™¨å…¥å¤¾è¬\nã€æ–°éƒã€‘æ¯”åˆ©æ˜¯è·å“¡\nã€ç™¼ã€å²ã€‘å”åŠ©æ–°éƒ\nã€Jaydenã€‘ç¢ºèªæ­Œ+ç‰‡+ç›¸OK (MCæ‡‰å·²OK)\nã€Jeffã€‘ç¢ºèªæ¯å€‹ä½æœ‰å›ç¦®ç¦®ç‰©\nã€David Loã€‘è¯çµ¡è·å“¡/å„Vendor(å¦‚éœ€)',
            items: 'åˆ©æ˜¯\nUSBã€é›»è…¦\nç°½åˆ°ç°¿ã€ç°½åç­†\nç›¸ç°¿ã€ç›¸æ¶\næ²¹ç•«\nåº§ä½è¡¨\näººæƒ…è¢‹ï¼ˆç”·å®¶è—è‰²ã€å¥³å®¶ç²‰ç´…ï¼‰ã€é‡‘å™¨è¢‹ï¼ˆè—è‰²æ—…è¡Œè¢‹ï¼‰\nåŸå­ç­†',
            note: 'è½æ‰€æœ‰ç‰©è³‡ï¼Œæš«æ”¾åˆ°Receptionå¾Œ',
            people: ['æ–°éƒ','æ–°å¨˜','ç¦§åª½','Jeff','Jayden','David Lo','å²','ç™¼','Vicky','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 28,
            startTime: '18:45',
            endTime: '19:30',
            place: 'é€¸æ±Maggie',
            title: 'è¿è³“+è£œæ•¬èŒ¶',
            tasks: 'ã€æ–°äººã€‘è£œæ•¬èŒ¶\nã€æ€¡åª½ã€‘19:00è£œå¦+æ›è£™\nã€å…„å¼Ÿã€‘å¸¶ä½\nã€Annaã€‘å‚™èŒ¶+æ·»èŒ¶/æ”¾ç´…æ£—è“®å­\nã€Vickyã€‘æ‹æ‰˜ç›¤+ä¸Šé¡éèŒ¶\nã€Lingã€‘å½±é‡‘å™¨(é€£é•·è¼©æ¨£)+è²¼label\nã€Chelsieã€‘è¨˜éŒ„åˆ©æ˜¯+è¢‹åˆ©æ˜¯+æˆ´é‡‘å™¨\nã€MC Kathyã€‘è¬›å‰åˆ©èªªè©±\nã€Bonnieã€Lingã€‘åReception+è£œæ´¾å¸–åŠé¤…å¡+Keepäººæƒ…(åˆ†ç”·ã€å¥³å®¶è¢‹)',
            items: 'å¸–\nç°½åˆ°ç°¿ã€ç°½åç­†\nLabel\nåŸå­ç­†\nåº§ä½è¡¨\näººæƒ…è¢‹ï¼ˆç”·å®¶è—è‰²ã€å¥³å®¶ç²‰ç´…ï¼‰ã€é‡‘å™¨è¢‹ï¼ˆè—è‰²æ—…è¡Œè¢‹ï¼‰\næ•¬èŒ¶ç”¨å“',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','æ€¡åª½','Jeff','Jayden','David Lo','å²','ç™¼','TC','Bonnie','Vicky','Ling','Anna','Chelsie'],
            expanded: false
        },
        {
            id: 29,
            startTime: '19:30',
            endTime: '20:00',
            place: 'é€¸æ±Maggie',
            title: 'ã€æ–°äººã€‘æ›è¡«+è£œå¦',
            tasks: '',
            items: 'å©šç´—\nè—è¥¿è£',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜'],
            expanded: false
        },
        {
            id: 30,
            startTime: '20:00',
            endTime: '20:05',
            place: 'é€¸æ±Maggie',
            title: 'æ’­æ”¾æˆé•·ç‰‡æ®µ',
            tasks: '',
            items: '',
            note: '',
            people: [],
            expanded: false
        },
        {
            id: 31,
            startTime: '20:05',
            endTime: '20:30',
            place: 'é€¸æ±Maggie',
            title: 'é€²å ´',
            tasks: 'é€²å ´\nè‡´è¾­\nåˆ‡è›‹ç³•+äº¤æ¯+ç¥é…’+kiss+æ–°äººè‡´è©',
            items: '',
            note: 'Just enjoy:)',
            people: ['æ–°éƒ','æ–°å¨˜'],
            expanded: false
        },
        {
            id: 32,
            startTime: '20:30',
            endTime: '20:45',
            place: 'é€¸æ±Maggie',
            title: 'é–‹å¸­',
            tasks: 'èµ·èœ',
            items: '',
            note: '',
            people: [],
            expanded: false
        },
        {
            id: 33,
            startTime: '20:45',
            endTime: '21:30',
            place: 'é€¸æ±Maggie',
            title: 'æ•¬é…’',
            tasks: 'ã€æ–°å¨˜ã€‘æ›æ•¬é…’è£™\nã€æ–°äººã€å®¶äººã€‘é€åœæ•¬é…’\nã€Chelsieã€Lingã€‘å”åŠ©æˆ´é‡‘å™¨',
            items: 'é‡‘å™¨\næ•¬é…’è£™\nç´…ç¹©',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜','Chelsie','Ling','ç¦§çˆ¸','ç¦§åª½','æ€¡çˆ¸','æ€¡åª½'],
            expanded: false
        },
        {
            id: 34,
            startTime: '21:30',
            endTime: '21:45',
            place: 'é€¸æ±Maggie',
            title: 'æ—©æ‹æ™šæ’­',
            tasks: '',
            items: '',
            note: 'è¦–ä¹Videoå‰ªå¥½æ™‚é–“',
            people: [],
            expanded: false
        },
        {
            id: 35,
            startTime: '21:45',
            endTime: '22:30',
            place: 'é€¸æ±Maggie',
            title: 'æŒ‰å½±ç›¸æ¬¡åºåˆç…§',
            tasks: '',
            items: 'å½±ç›¸æ¬¡åºList',
            note: '',
            people: ['æ–°éƒ','æ–°å¨˜'],
            expanded: false
        },
        {
            id: 36,
            startTime: '22:30',
            endTime: '23:00',
            place: 'é€¸æ±Maggie',
            title: 'ã€æ–°äººã€å®¶äººã€‘é€å®¢',
            tasks: 'ã€å…„å¼Ÿå§Šå¦¹ã€‘é»ç‰©è³‡ã€æ¸…å ´ã€åŸ‹å–®',
            items: '',
            note: 'å°‡éƒ¨ä»½ç‰©è³‡(ç¦®ç‰©ã€ç›¸ç°¿ã€ç›¸æ¶ã€é‡‘å™¨ã€èŠ±çƒ)æ”¾ä¸Šç¦§çˆ¸è»Š',
            people: ['æ–°éƒ','ç¦§åª½','ç¦§çˆ¸','Jeff','Jayden','David Lo','å²','TC','ç™¼','æ–°å¨˜','æ€¡åª½','æ€¡çˆ¸','Vicky','Bonnie','Ling','Anna','Chelsie'],
            expanded: false
        },
        
      ],
      golds: [],
      goldCategories: ['è€³ç’°','é ¸éŠ','åŠå¢œ','æ‰‹æ‰¼','æ‰‹éŠ','æˆ’æŒ‡','æ“ºä»¶'],
      gifts: [],
      contacts: [
          // è¯çµ¡äººåˆ—è¡¨
          { side: 'ç”·å®¶', role: 'æ–°éƒ', name: 'H', phone: '', deleted: false },
          { side: 'ç”·å®¶', role: 'ä¼´éƒï¼å…„å¼Ÿ', name: 'F', phone: '', deleted: false },
          { side: 'ç”·å®¶', role: 'å…„å¼Ÿï¼ˆå©šç¦®çµ±ç±Œï¼‰', name: 'S', phone: '', deleted: false },
          { side: 'ç”·å®¶', role: 'å…„å¼Ÿ', name: 'DL', phone: '', deleted: false },
          { side: 'ç”·å®¶', role: 'å…„å¼Ÿ', name: 'J', phone: '', deleted: false },
          { side: 'ç”·å®¶', role: 'å…„å¼Ÿ', name: 'J', phone: '', deleted: false },
          { side: 'å¥³å®¶', role: 'æ–°å¨˜', name: 'V', phone: '', deleted: false },
          { side: 'å¥³å®¶', role: 'ä¼´å¨˜ï¼å§Šå¦¹', name: 'V', phone: '', deleted: false },
          { side: 'å¥³å®¶', role: 'å§Šå¦¹', name: 'A', phone: '', deleted: false },
          { side: 'å¥³å®¶', role: 'å§Šå¦¹', name: 'B', phone: '', deleted: false },
          { side: 'å¥³å®¶', role: 'å§Šå¦¹', name: 'C', phone: '', deleted: false },
          { side: 'å¥³å®¶', role: 'å§Šå¦¹', name: 'L', phone: '', deleted: false },
          { side: 'å…¶ä»–', role: 'é€¸æ±é…’åº—', name: 'Katy', phone: '68084055', deleted: false },
          { side: 'å…¶ä»–', role: 'æ†å¯¶ï¼ˆæ—…éŠå·´å…¬å¸ï¼‰', name: 'Apple', phone: '65557418', deleted: false },
          { side: 'å…¶ä»–', role: 'Wemember', name: 'May Chu', phone: '69241730', deleted: false },
          { side: 'å…¶ä»–', role: 'å›ç¦®ç¦®ç‰©', name: 'Codekey Cookies', phone: '95896101', deleted: false },
          { side: 'å…¶ä»–', role: 'æ–°å¨˜åŒ–å¦å¸«', name: 'Candy Mak', phone: '61574889', deleted: false },
          { side: 'å…¶ä»–', role: 'æ”å½±å¸«', name: 'Calvin Mak', phone: '54480122', deleted: false },
          { side: 'å…¶ä»–', role: 'éŒ„å½±å¸«', name: 'Yu', phone: '59910511', deleted: false },
          { side: 'å…¶ä»–', role: 'å¸ç´', name: '', phone: '', deleted: false },
          { side: 'å…¶ä»–', role: 'èŠ±è»Š', name: '', phone: '', deleted: false },
          { side: 'å…¶ä»–', role: 'èŠ±è»Š', name: '', phone: '', deleted: false },
          { side: 'å…¶ä»–', role: '65åº§å¸æ©Ÿ1', name: '65åº§å¸æ©Ÿ1', phone: 'TBC', deleted: false },
          { side: 'å…¶ä»–', role: '65åº§å¸æ©Ÿ2', name: '65åº§å¸æ©Ÿ2', phone: 'TBC', deleted: false },
          { side: 'å…¶ä»–', role: '28åº§å¸æ©Ÿï¼ˆæ™‚ç§Ÿ12:15â€“18:15ï¼‰', name: '28åº§å¸æ©Ÿ', phone: 'TBC', deleted: false },
          { side: 'å…¶ä»–', role: 'æ™šå®´MC', name: 'Kathy', phone: '60748285', deleted: false },
      ],
      contactCats: ['ç”·å®¶', 'å¥³å®¶', 'å…¶ä»–'],
      contactFilter: 'å¥³å®¶',

      // === å½±ç›¸æ¬¡åºè³‡æ–™ ===
      photoSchedules: [ 
        { title: "æ•™å ‚æ‹ç…§åå–® (18çµ„)", groups: [ 
          { name: "ä¸»ç¦®äºº", count: 7, cat: "other" }, 
          { name: "æ–°éƒå®¶äºº", count: 3, cat: "male" }, 
          { name: "æ–°éƒå®¶äººåŠè¦ªæˆš", count: 40, cat: "male" }, 
          { name: "é›™æ–¹å®¶äºº", count: 6, cat: "other" }, 
          { name: "æ–°å¨˜å®¶äºº", count: 3, cat: "female" }, 
          { name: "æ–°å¨˜å®¶äººåŠè¦ªæˆš", count: 40, cat: "female" }, 
          { name: "å…„å¼Ÿå§Šå¦¹åœ˜", count: 10, cat: "other" }, 
          { name: "æ–°éƒåŸ”æµ¸å°åŒäº‹", count: 10, cat: "male" }, 
          { name: "æ–°å¨˜ç¦®è³¢æœƒåŒäº‹", count: 10, cat: "female" }, 
          { name: "æ–°å¨˜é‹å¹¼åŒäº‹", count: 8, cat: "female" }, 
          { name: "æ–°å¨˜å¤§å­¸åŒå­¸", count: 4, cat: "female" }, 
          { name: "æ–°éƒæ–°å¨˜ä¸­å­¸å¸«é•·åŠåŒå­¸", count: 30, cat: "other" }, 
          { name: "æ–°éƒç´„ç‘Ÿåœ˜å¼Ÿå…„å§Šå¦¹", count: 30, cat: "male" }, 
          { name: "æ–°éƒä»¥è¥¿çµåœ˜å¼Ÿå…„å§Šå¦¹", count: 30, cat: "male" }, 
          { name: "æ–°éƒå®‰æŸ±å ‚å¼Ÿå…„å§Šå¦¹", count: 30, cat: "male" }, 
          { name: "æ–°éƒTTTå°å¸«", count: 10, cat: "male" }, 
          { name: "æ–°å¨˜CTYCå¼Ÿå…„å§Šå¦¹", count: 7, cat: "other" }, 
          { name: "å…¶ä»–ä¾†è³“åŠå¥½å‹", count: 0, cat: "other" } 
        ] },
        {title: "æ™šå®´æ‹ç…§åå–® (18çµ„)", groups: [ 
          { name: "æ–°éƒçˆ¶æ¯", count: 2, cat: "male" }, 
          { name: "æ–°éƒå®¶äºº", count: 3, cat: "male" }, 
          { name: "é›™æ–¹å®¶äºº", count: 6, cat: "other" }, 
          { name: "é›™æ–¹çˆ¶æ¯", count: 4, cat: "other" }, 
          { name: "æ–°å¨˜çˆ¶æ¯", count: 2, cat: "female" }, 
          { name: "æ–°å¨˜å®¶äºº", count: 3, cat: "female" }, 
          { name: "è€çˆºè¦ªæˆš(å‘¨æ°å®¶æ—)", count: 20, cat: "male" }, 
          { name: "å¥¶å¥¶è¦ªæˆš(å‘¨æ°å®¶æ—)", count: 20, cat: "male" }, 
          { name: "å¤–çˆ¶è¦ªæˆš(ä¸˜æ°å®¶æ—)", count: 24, cat: "female" }, 
          { name: "å¤–æ¯è¦ªæˆš(è˜‡æ°å®¶æ—)", count: 30, cat: "female" }, 
          { name: "æ–°éƒçˆ¸çˆ¸åŒäº‹", count: 12, cat: "male" }, 
          { name: "æ–°éƒçˆ¶æ¯æœ‹å‹", count: 10, cat: "male" }, 
          { name: "æ–°å¨˜å¤§å­¸åŒå­¸", count: 4, cat: "female" }, 
          { name: "æ–°éƒæ–°å¨˜ä¸­å­¸è€å¸«", count: 5, cat: "other" }, 
          { name: "æ–°éƒæ–°å¨˜ä¸­å­¸åŒå­¸", count: 7, cat: "other" }, 
          { name: "æ–°éƒTTTå°å¸«", count: 12, cat: "male" }, 
          { name: "æ–°éƒå®‰æŸ±å ‚å¼Ÿå…„å§Šå¦¹", count: 25, cat: "male" }, 
          { name: "æ–°å¨˜CTYCå¼Ÿå…„å§Šå¦¹", count: 11, cat: "female" }, 
          { name: "å…„å¼Ÿå§Šå¦¹åœ˜", count: 10, cat: "other" }, 
          { name: "è‡ªç”±åˆç…§", count: 0, cat: "other" }],
        }, 
      ],
      showScheduleModal: false,
      showGoldModal: false,
      showGiftModal: false,
      showContactModal: false,
      currentSchedule: {},
      currentGold: {},
      currentGift: {},
      currentContact: {},
      maleSide: ['æ–°éƒ','ç¦§åª½','ç¦§çˆ¸','Jeff','Jayden','David Lo','å²','TC','ç™¼'],
      femaleSide: ['æ–°å¨˜','æ€¡åª½','æ€¡çˆ¸','Vicky','Bonnie','Ling','Anna','Chelsie']
    }
  },
  computed: {
    // ã€æ–°å¢ 1ã€‘å¾æ‰€æœ‰è¡Œç¨‹ä¸­æå–å”¯ä¸€çš„è² è²¬äººåå–®ï¼Œç”¨æ–¼ç¯©é¸å™¨
   uniqueResponsibles() {
        const allPeople = new Set();
        this.scheduleList.forEach(s => {
            if (s.people && Array.isArray(s.people)) {
                s.people.forEach(p => {
                    if (p.trim()) {
                        allPeople.add(p.trim());
                    }
                });
            }
        });
        
        // å°‡ Set è½‰æ›ç‚º Array
        const peopleArray = Array.from(allPeople);

        // ã€ä¿®æ”¹ 2ã€‘ä½¿ç”¨è‡ªå®šç¾©é †åºé€²è¡Œæ’åº
        peopleArray.sort((a, b) => {
            const indexA = this.customResponsibleOrder.indexOf(a);
            const indexB = this.customResponsibleOrder.indexOf(b);

            // è™•ç†ï¼šå¦‚æœæŸäººååœ¨ customResponsibleOrder å…§
            if (indexA !== -1 && indexB !== -1) {
                return indexA - indexB; // å…©è€…éƒ½åœ¨åˆ—è¡¨å…§ï¼ŒæŒ‰åˆ—è¡¨é †åºæ’
            } 
            
            // è™•ç†ï¼šå¦‚æœåªæœ‰å…¶ä¸­ä¸€äººåœ¨ customResponsibleOrder å…§
            if (indexA !== -1) {
                return -1; // a åœ¨åˆ—è¡¨å…§ï¼Œæ’åœ¨ b å‰é¢
            }
            if (indexB !== -1) {
                return 1; // b åœ¨åˆ—è¡¨å…§ï¼Œæ’åœ¨ a å¾Œé¢
            }

            // è™•ç†ï¼šå¦‚æœå…©è€…éƒ½ä¸åœ¨ customResponsibleOrder å…§
            // è®“ä¸åœ¨åˆ—è¡¨å…§çš„äººåæŒ‰å­—æ¯/ç­†ç•«æ’åº (ä½œç‚ºå¾Œå‚™)
            return a.localeCompare(b);
        });

        return peopleArray; 
    },

        // ã€æ–°å¢ 2ã€‘æ ¹æ“šè² è²¬äººç¯©é¸ç‹€æ…‹éæ¿¾è¡Œç¨‹åˆ—è¡¨
    // ã€ä¿®æ­£å¾Œã€‘ä¹¾æ·¨çš„ç¯©é¸èˆ‡æ’åº
    filteredScheduleList() {
        // 1. å…ˆè¤‡è£½ä¸€ä»½æ¸…å–®ï¼Œé¿å…å½±éŸ¿åŸå§‹è³‡æ–™
        let list = [...this.scheduleList];

        // 2. åŸ·è¡Œè² è²¬äººç¯©é¸
        if (this.responsibleFilter !== 'å…¨éƒ¨') {
            const filterName = this.responsibleFilter;
            list = list.filter(s => 
                s.people && Array.isArray(s.people) && s.people.includes(filterName)
            );
        }

        // 3. åŸ·è¡Œæ™‚é–“æ’åº (ç”±æ—©åˆ°æ™š)
        list.sort((a, b) => {
            return a.startTime.localeCompare(b.startTime);
        });

        return list;
    },
    sortedScheduleList() {
        // ç²å–ç•¶å‰æ™‚é–“æˆ³
        const now = this.nowTick;
        // ä½¿ç”¨è¼”åŠ©å‡½å¼å°‡æ™‚é–“å­—ä¸²è½‰æ›ç‚ºæ™‚é–“æˆ³
        const getTs = (timeStr) => this.getTimestampFromTime(timeStr, now);

        let currentSchedule = null;
        let nextSchedule = null;
        let minNextStartTime = Infinity;

        // ç¬¬ä¸€æ­¥ï¼šéæ­·æ¸…å–®ï¼Œæ‰¾å‡ºã€Œç¾åœ¨é€²è¡Œä¸­ã€å’Œã€Œä¸‹ä¸€å€‹ã€è¡Œç¨‹
        this.scheduleList.forEach(s => {
            const startTs = getTs(s.startTime);
            let endTs = s.endTime ? getTs(s.endTime) : Infinity;

            // è™•ç†è·¨æ—¥è¡Œç¨‹ (çµæŸæ™‚é–“æ—©æ–¼é–‹å§‹æ™‚é–“, ä¾‹å¦‚ 23:00~01:00)
            if (s.endTime && endTs < startTs) {
                endTs += 24 * 60 * 60 * 1000;
            }

            // A. æ‰¾å‡ºç¾åœ¨é€²è¡Œä¸­çš„è¡Œç¨‹ï¼š start <= now < end
            if (startTs <= now && now < endTs) {
                currentSchedule = s;
            }

            // B. æ‰¾å‡ºä¸‹ä¸€å€‹è¡Œç¨‹ï¼š start > now ä¸”é–‹å§‹æ™‚é–“æœ€è¿‘
            if (startTs > now) {
                if (startTs < minNextStartTime) {
                    minNextStartTime = startTs;
                    nextSchedule = s;
                }
            }
        });

        // ç¬¬äºŒæ­¥ï¼šä½¿ç”¨è‡ªè¨‚æ’åºé‚è¼¯
        return [...this.scheduleList].sort((a, b) => {
            // 1. æœ€é«˜å„ªå…ˆç´šï¼šç¾åœ¨é€²è¡Œä¸­çš„è¡Œç¨‹
            if (a === currentSchedule) return -3;
            if (b === currentSchedule) return 3;

            // 2. ç¬¬äºŒå„ªå…ˆç´šï¼šä¸‹ä¸€å€‹è¡Œç¨‹
            if (a === nextSchedule) return -2;
            if (b === nextSchedule) return 2;

            // 3. å‰©é¤˜è¡Œç¨‹ï¼šæŒ‰æ™‚é–“é †åºæ’åº (æ•¸å€¼è¶Šå°è¶Šæ—©)
            const startA = getTs(a.startTime);
            const startB = getTs(b.startTime);
            
            if (startA === startB) {
                // å¦‚æœé–‹å§‹æ™‚é–“ç›¸åŒï¼ŒæŒ‰çµæŸæ™‚é–“æ’ (çµæŸæ™‚é–“æ—©çš„å„ªå…ˆ)
                const endA = a.endTime ? getTs(a.endTime) : Infinity;
                const endB = b.endTime ? getTs(b.endTime) : Infinity;
                return endA - endB;
            }
            return startA - startB;
        });
    },
    allExecutors() {
        return [...this.maleSide, ...this.femaleSide]
    },
    sortedScheduleList() {
        return [...this.scheduleList].sort((a,b)=>a.startTime.localeCompare(b.startTime))
    },
    totalGiftAmount() {
        return this.gifts.filter(x=>!x.deleted).reduce((s,g)=>s+(Number(g.amount)||0), 0)
    },
    filteredContacts() {
        // 1. å–å¾—æœå°‹é—œéµå­—ä¸¦è½‰ç‚ºå°å¯« (å»é™¤å‰å¾Œç©ºç™½)
        const search = this.contactSearch ? this.contactSearch.trim().toLowerCase() : '';

        // 2. é‚è¼¯åˆ¤æ–·ï¼š
        // å¦‚æœæœ‰è¼¸å…¥æœå°‹æ–‡å­— -> æœå°‹ã€Œæ‰€æœ‰ã€è¯çµ¡äºº (å¿½ç•¥ contactFilter åˆ†é¡)
        if (search) {
            return this.contacts.filter(c => 
                (c.name?.toLowerCase() || '').includes(search) || 
                (c.role?.toLowerCase() || '').includes(search) ||
                (c.phone?.toLowerCase() || '').includes(search) // é †ä¾¿åŠ å…¥äº†é›»è©±è™Ÿç¢¼æœå°‹ï¼Œæ–¹ä¾¿æ‚¨ç”¨é›»è©±æ‰¾äºº
            );
        }

        // 3. å¦‚æœæœå°‹æ¡†æ˜¯ç©ºçš„ -> ä¾ç…§åŸæœ¬é‚è¼¯ï¼Œåªé¡¯ç¤ºç›®å‰åˆ†é  (å¦‚ï¼šç”·å®¶/å¥³å®¶)
        return this.contacts.filter(c => c.side === this.contactFilter);
    },
    // åº§ä½è¡¨ç¯©é¸èˆ‡æ’åº
    filteredSeatTables() {
        // å…ˆæ’åº
        let tables = [...this.seatTables].sort((a,b) => a.id - b.id);
        
        if(!this.seatSearch) return tables;

        const s = this.seatSearch.toLowerCase();

        return tables.filter(t => 
            // ä¿®æ­£ï¼šç¢ºä¿ t.id è½‰ç‚ºå­—ä¸²ä»¥é€²è¡ŒåŒ…å«æª¢æŸ¥
            String(t.id).includes(s) || 
            (t.category && t.category.toLowerCase().includes(s)) ||
            t.guests.some(g => 
                // ä¿®æ­£ï¼šä½¿ç”¨ ?. éˆæ¥ç¢ºä¿åœ¨ name/role ç‚º null/undefined æ™‚ä¸æ‹‹å‡ºéŒ¯èª¤
                (g.name?.toLowerCase() || '').includes(s) || 
                (g.role?.toLowerCase() || '').includes(s)
            )
        )
    }
  },
  methods: {
    /**
     * æ–°å¢ï¼šå°‡ HH:MM å­—ä¸²è½‰æ›æˆä»Šå¤©æ—¥æœŸçš„æ™‚é–“æˆ³ (Timestamp)
     * @param {string} timeStr - æ™‚é–“å­—ä¸²ï¼Œæ ¼å¼ç‚º HH:MM
     * @param {number} referenceDate - åƒè€ƒçš„æ™‚é–“æˆ³ (é€šå¸¸æ˜¯ this.nowTick)
     * @returns {number | null} - æ¯«ç§’æ™‚é–“æˆ³
     */
    getTimestampFromTime(timeStr, referenceDate) {
        if (!timeStr) return null;
        // ä½¿ç”¨åƒè€ƒæ—¥æœŸï¼ˆnowTickï¼‰ä¾†è¨­å®šæ—¥æœŸéƒ¨åˆ†
        const date = new Date(referenceDate);
        const [hours, minutes] = timeStr.split(':').map(Number);
        
        // è¨­å®šæ™‚/åˆ†/ç§’/æ¯«ç§’
        date.setHours(hours, minutes, 0, 0);
        return date.getTime();
    },
    // ==================== è¯çµ¡äººé‚è¼¯ ====================
    getContactTagClass(c) {
        return c==='ç”·å®¶'?'bg-blue-200/50 text-blue-800':c==='å¥³å®¶'?'bg-pink-200/50 text-pink-800':'bg-emerald-200/50 text-emerald-800';
    },
    getContactDotClass(c) {
        return c==='ç”·å®¶'?'bg-blue-400':c==='å¥³å®¶'?'bg-pink-400':'bg-emerald-400';
    },
    getContactActiveColor(c){
        return c==='ç”·å®¶'?'bg-gradient-to-r from-blue-100 to-blue-200 text-blue-600 shadow-sm':
               c==='å¥³å®¶'?'bg-gradient-to-r from-pink-100 to-pink-200 text-pink-600 shadow-sm':
               'bg-gradient-to-r from-emerald-100 to-emerald-200 text-emerald-600 shadow-sm';
    },
    getPersonColor(p){
        // ç²‰ç´…è‰² (å¥³å®¶)
        if(this.femaleSide.includes(p)) return 'bg-pink-400'; 
        // è—è‰² (ç”·å®¶)
        if(this.maleSide.includes(p)) return 'bg-blue-400'; 
        // ç¶ è‰² (å…¶ä»–)
        return 'bg-emerald-400'; 
    },
    openAddContact() {
        this.currentContact = { side: this.contactFilter, role: '', name: '', phone: '', deleted: false };
        this.modalTitle = 'æ–°å¢è¯çµ¡äºº';
        this.modalConfirmText = 'æ–°å¢';
        this.activeModal = 'addContact';
    },
    
    openEditContact(contact) {
        this.currentContact = JSON.parse(JSON.stringify(contact));
        this.modalTitle = 'ç·¨è¼¯è¯çµ¡äºº';
        this.modalConfirmText = 'å„²å­˜';
        this.activeModal = 'editContact';
    },
    saveContact() {
        const index = this.contacts.findIndex(c => c.id === this.currentContact.id);
        const contactToSave = { 
            ...this.currentContact, 
            id: this.currentContact.id || Date.now(), 
            side: this.currentContact.side || 'å…¶ä»–' // ç¢ºä¿æœ‰åˆ†é¡
        };

        if (index !== -1) {
            // Edit
            this.contacts.splice(index, 1, contactToSave);
        } else {
            // Add
            this.contacts.push(contactToSave);
        }
        this.sync('contactList', this.contacts);
        this.closeModal();
    },
    deleteContact(id) {
        if(confirm('ç¢ºå®šè¦åˆªé™¤é€™ä½è¯çµ¡äººå—ï¼Ÿ')) {
            this.contacts = this.contacts.filter(c => c.id !== id);
            this.sync('contactList', this.contacts);
        }
    },
    getWhatsAppLink(phone) {
        if (!phone) return '#';
        
        // ç¢ºä¿é›»è©±è™Ÿç¢¼ç‚ºç´”æ•¸å­—ã€‚é€™æ˜¯æœ€é—œéµçš„ä¸€æ­¥ï¼
        let cleaned = phone.replace(/[^\d]/g, ''); 
        
        // æª¢æŸ¥æ˜¯å¦å·²åŒ…å«å€è™Ÿï¼Œå¦‚æœè™Ÿç¢¼æ˜¯ 8 ä½ä¸”æ²’æœ‰å€è™Ÿï¼Œå‰‡é è¨­åŠ ä¸Šé¦™æ¸¯å€è™Ÿ 852
        if (cleaned.length === 8) {
            cleaned = '852' + cleaned;
        }

        return `https://wa.me/${cleaned}`;
    },

    // ==================== åº§ä½è¡¨é‚è¼¯ ====================
    openEditSeatModal(table) {
        // æ‰¾åˆ° index ç¢ºä¿æ›´æ–°æ­£ç¢º
        this.editingTableIndex = this.seatTables.findIndex(t => t.id === table.id);
        // ç¢ºä¿ deep copyï¼Œé˜²æ­¢ä¿®æ”¹æœªå„²å­˜
        this.currentTable = JSON.parse(JSON.stringify(table));
        this.modalTitle = `ç·¨è¼¯ Table ${table.id}`;
        this.modalConfirmText = 'å„²å­˜è®Šæ›´';
        // ä¿®æ­£ï¼šæœ€å¾Œå†è¨­å®š activeModal
        this.activeModal = 'editSeatTable';
    },
    addSeatTable() {
        // è‡ªå‹•ç”¢ç”Ÿä¸‹ä¸€å€‹ ID
        const maxId = this.seatTables.reduce((max, t) => Math.max(max, t.id), 0);
        // ä¿®æ­£ï¼šç¢ºä¿ id ç‚º Number
        this.currentTable = { id: Number(maxId) + 1, category: 'æ–°åœæ¡Œ', guests: [] };
        this.editingTableIndex = -1; // -1 è¡¨ç¤ºæ–°å¢
        this.modalTitle = 'æ–°å¢ä¸€åœ';
        this.modalConfirmText = 'å»ºç«‹';
        // ä¿®æ­£ï¼šæœ€å¾Œå†è¨­å®š activeModal
        this.activeModal = 'editSeatTable';
    },
    saveSeatTable() {
        if (!this.currentTable.id || !this.currentTable.category) {
            alert('æ¡Œè™Ÿå’Œåˆ†é¡åç¨±ä¸å¯ç‚ºç©º');
            return;
        }

        // æª¢æŸ¥ ID æ˜¯å¦é‡è¤‡ (é™¤äº†ç·¨è¼¯è‡ªå·±)
        const isIdDuplicate = this.seatTables.some((t, index) => 
            t.id === this.currentTable.id && index !== this.editingTableIndex
        );

        if (isIdDuplicate) {
            alert('æ¡Œè™Ÿé‡è¤‡ï¼Œè«‹ä½¿ç”¨å…¶ä»–è™Ÿç¢¼ã€‚');
            return;
        }

        if (this.editingTableIndex > -1) {
            // ç·¨è¼¯ç¾æœ‰æ¡Œå­
            this.seatTables.splice(this.editingTableIndex, 1, this.currentTable);
        } else {
            // æ–°å¢æ¡Œå­
            this.seatTables.push(this.currentTable);
        }

        this.sync('seatTables', this.seatTables);
        this.closeModal();
    },
    addGuestToCurrent() {
        this.currentTable.guests.push({name: '', role: '', present: false});
    },
    removeGuestFromCurrent(idx) {
        this.currentTable.guests.splice(idx, 1);
    },
    deleteCurrentTable() {
        if(confirm('ç¢ºå®šè¦åˆªé™¤æ•´åœæ¡Œå­è³‡æ–™å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚')) {
            if(this.editingTableIndex > -1) {
                this.seatTables.splice(this.editingTableIndex, 1);
            }
            this.saveInfo();
            this.closeModal();
        }
    },
    // ä¿®æ­£ï¼šç¢ºä¿ tableId é¡å‹ä¸€è‡´æ€§
    toggleGuestPresent(tableId, guestIdx) {
        // ä¿®æ­£ï¼šä½¿ç”¨ String() è½‰æ›ç¢ºä¿é¡å‹æ¯”è¼ƒæ­£ç¢º
        const table = this.seatTables.find(t => String(t.id) === String(tableId));
        if (table && table.guests[guestIdx]) {
            table.guests[guestIdx].present = !table.guests[guestIdx].present;
            this.saveInfo();
        }
    },


    // ==================== ç‰©è³‡æ¸…å–®é‚è¼¯ ====================
    toggleList(listName) {
      const index = this.expandedLists.indexOf(listName);
      if (index === -1) {
        this.expandedLists.push(listName);
      } else {
        this.expandedLists.splice(index, 1);
      }
    },
    removeItem(listName, index) {
      if (confirm(`ç¢ºå®šå¾ [${listName}] ç§»é™¤æ­¤é …ç›®å—ï¼Ÿ`)) {
        this.itemLists[listName].splice(index, 1);
        this.saveInfo();
      }
    },
    openAddItemModal(listName) {
      this.modalSelectedList = listName;
      this.modalTitle = `æ–°å¢åˆ° [${listName}]`;
      this.modalInputLabel = 'é …ç›®åç¨±';
      this.modalPlaceholder = 'ä¾‹å¦‚: AAé›»æ±  x 2';
      this.modalInput = '';
      this.modalConfirmText = 'æ–°å¢';
      this.activeModal = 'addItem';
    },
    openAddListModal() {
        this.modalTitle = 'æ–°å¢ç‰©è³‡æ¸…å–®';
        this.modalInputLabel = 'æ¸…å–®æ¨™é¡Œ';
        this.modalPlaceholder = 'ä¾‹å¦‚: å©šç´—æ”å½±';
        this.modalInput = '';
        this.modalConfirmText = 'æ–°å¢';
        this.activeModal = 'addList';
        this.showManageSubMenu = false;
    },
    openEditListModal() {
        this.modalTitle = 'ä¿®æ”¹æ¸…å–®æ¨™é¡Œ';
        this.modalInputLabel = 'æ–°æ¸…å–®æ¨™é¡Œ';
        this.modalPlaceholder = 'è«‹è¼¸å…¥æ–°çš„æ¨™é¡Œ';
        this.modalInput = '';
        this.modalSelectedList = Object.keys(this.itemLists)[0];
        this.modalConfirmText = 'é‡æ–°å‘½å';
        this.activeModal = 'editList';
        this.showManageSubMenu = false;
    },
    openRemoveListModal() {
        this.modalTitle = 'ç§»é™¤ç‰©è³‡æ¸…å–®';
        this.modalSelectedList = Object.keys(this.itemLists)[0];
        this.modalConfirmText = 'ç§»é™¤';
        this.activeModal = 'removeList';
        this.showManageSubMenu = false;
    },

    // ==================== å½±ç›¸æ¬¡åºé‚è¼¯ ====================
    getPhotoCatColor(cat) {
        if(cat==='male') return 'bg-blue-400';
        if(cat==='female') return 'bg-pink-400';
        return 'bg-emerald-400';
    },
    openAddPhotoList() {
        this.currentPhotoList = { title: 'æ–°çš„å½±ç›¸åˆ—è¡¨', groups: [] };
        this.photoEditingIndex = -1;
        this.modalTitle = 'æ–°å¢å½±ç›¸åˆ—è¡¨';
        this.modalConfirmText = 'å„²å­˜';
        this.activeModal = 'editPhotoList';
    },
    openEditPhotoList(index) {
        this.photoEditingIndex = index;
        this.currentPhotoList = JSON.parse(JSON.stringify(this.photoSchedules[index]));
        this.modalTitle = 'ç·¨è¼¯å½±ç›¸åˆ—è¡¨';
        this.modalConfirmText = 'å„²å­˜';
        this.activeModal = 'editPhotoList';
    },
    addPhotoGroup() {
        this.currentPhotoList.groups.push({ name: '', count: null, cat: 'other' });
    },
    removePhotoGroup(index) {
        this.currentPhotoList.groups.splice(index, 1);
    },
    savePhotoList() {
        if (this.currentPhotoList.title === '') {
            alert('è«‹è¼¸å…¥åˆ—è¡¨æ¨™é¡Œ');
            return;
        }

        if (this.photoEditingIndex === -1) {
            this.photoSchedules.push(this.currentPhotoList);
        } else {
            this.photoSchedules[this.photoEditingIndex] = this.currentPhotoList;
        }

        this.sync('photoSchedules', this.photoSchedules);
        this.closeModal();
    },
    deletePhotoList() {
        if(confirm('ç¢ºå®šè¦åˆªé™¤æ•´å€‹å½±ç›¸åˆ—è¡¨å—ï¼Ÿ')) {
            this.photoSchedules.splice(this.photoEditingIndex, 1);
            this.sync('photoSchedules', this.photoSchedules);
            this.closeModal();
        }
    },


    // ==================== è¡Œç¨‹é‚è¼¯ ====================
    togglePerson(p) {
        if (!this.currentSchedule.people) {
            this.currentSchedule.people = [];
        }
        const index = this.currentSchedule.people.indexOf(p);
        if (index === -1) {
            this.currentSchedule.people.push(p);
        } else {
            this.currentSchedule.people.splice(index, 1);
        }
    },
    toggleCard(id) {
        const item = this.scheduleList.find(s=>s.id === id);
        if(item) {
            item.expanded = !item.expanded;
        }
    },
    openAddSchedule() {
        this.currentSchedule = { 
            id: null, 
            startTime: null, 
            endTime: null, 
            place: '', 
            title: '', 
            tasks: '', 
            items: '', 
            note: '', 
            people: [],
            expanded: true
        };
        this.showScheduleModal = true;
    },
    openEditSchedule(s) {
        // Deep copy
        this.currentSchedule = JSON.parse(JSON.stringify(s)); 
        this.showScheduleModal = true;
    },
    saveSchedule() {
        if (!this.currentSchedule.title || !this.currentSchedule.startTime) {
            alert('è¡Œç¨‹æ¨™é¡Œå’Œé–‹å§‹æ™‚é–“ç‚ºå¿…å¡«');
            return;
        }

        if (!this.currentSchedule.id) {
            this.currentSchedule.id = Date.now();
            this.scheduleList.push(this.currentSchedule);
        } else {
            const index = this.scheduleList.findIndex(s => s.id === this.currentSchedule.id);
            if (index !== -1) {
                this.scheduleList.splice(index, 1, this.currentSchedule);
            }
        }
        this.sync('scheduleList', this.scheduleList);
        this.showScheduleModal = false;
        this.initScheduleState();
    },

    togglePhotoGroup(groupTitle) {
    // é è¨­ç‹€æ…‹ç‚º true (æ”¶åˆ)ï¼Œç„¶å¾Œåˆ‡æ›
    this.collapsedPhotoGroups[groupTitle] = !this.collapsedPhotoGroups[groupTitle];
    },


    // ==================== é‡‘å™¨é‚è¼¯ ====================
    loadGoldImage(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                this.currentGold.image = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    },
    openAddGold() {
        // ID é‚è¼¯ä¿®æ­£: ä¸è«–è»Ÿåˆªé™¤èˆ‡å¦ï¼Œæ°¸é ä½¿ç”¨ç¸½é•·åº¦+1ï¼Œç¢ºä¿IDä¸æœƒé‡è¤‡æˆ–è®Šæ›´
        const nextId = this.golds.length + 1;
        this.currentGold = { id: null, no: nextId, qty: 1, category: 'æ‰‹æ‰¼', from: '', side: 'ç”·å®¶', image: '', deleted: false };
        this.showGoldModal = true;
    },
    openEditGold(g) {
        this.currentGold = JSON.parse(JSON.stringify(g));
        this.showGoldModal = true;
    },
    saveGold() {
        if (!this.currentGold.category) {
            alert('é¡åˆ¥ç‚ºå¿…é¸');
            return;
        }

        if (!this.currentGold.id) {
            this.currentGold.id = Date.now();
            this.golds.push(this.currentGold);
        } else {
            const index = this.golds.findIndex(g => g.id === this.currentGold.id);
            if (index !== -1) {
                this.golds.splice(index, 1, this.currentGold);
            }
        }
        this.sync('goldList', this.golds);
        this.showGoldModal = false;
    },
    softDeleteGold(g) {
        if(confirm(`ç¢ºå®šåˆªé™¤é‡‘å™¨ #${g.no} (${g.category}) å—?`)) {
            g.deleted = true;
            this.sync('goldList', this.golds);
        }
    },
    restoreGold(g) {
        g.deleted = false;
        this.sync('goldList', this.golds);
    },


    // ==================== åˆ©æ˜¯/ç¦®ç‰©é‚è¼¯ ====================
    openAddGift() {
        const nextId = this.gifts.length + 1;
        this.currentGift = { id: null, no: nextId, type: 'åˆ©æ˜¯', amount: null, qty: 1, from: '', side: 'ç”·å®¶', desc: '', deleted: false };
        this.showGiftModal = true;
    },
    openEditGift(g) {
        this.currentGift = JSON.parse(JSON.stringify(g));
        this.showGiftModal = true;
    },
    saveGift() {
        if (!this.currentGift.no) {
            alert('ç·¨è™Ÿç‚ºå¿…å¡«');
            return;
        }

        if (!this.currentGift.id) {
            this.currentGift.id = Date.now();
            this.gifts.push(this.currentGift);
        } else {
            const index = this.gifts.findIndex(g => g.id === this.currentGift.id);
            if (index !== -1) {
                this.gifts.splice(index, 1, this.currentGift);
            }
        }
        this.sync('giftList', this.gifts);
        this.showGiftModal = false;
    },
    softDeleteGift(g) {
        if(confirm(`ç¢ºå®šåˆªé™¤ #${g.no} (${g.type}) å—?`)) {
            g.deleted = true;
            this.sync('giftList', this.gifts);
        }
    },
    restoreGift(g) {
        g.deleted = false;
        this.sync('giftList', this.gifts);
    },


    // ==================== é€šç”¨ Modal ç¢ºèªé‚è¼¯ ====================
    closeModal() {
        this.activeModal = null;
        this.currentTable = null;
        this.currentContact = {};
    },
    handleModalConfirm() {
        // ç‰©è³‡è¡¨æ“ä½œ
        if(this.activeModal === 'addItem' && this.modalInput) {
            this.itemLists[this.modalSelectedList].push({ name: this.modalInput, checked: false });
        } else if(this.activeModal === 'addList' && this.modalInput) {
            if(!this.itemLists[this.modalInput]) this.itemLists[this.modalInput] = [];
        } else if(this.activeModal === 'editList' && this.modalInput && this.modalSelectedList) {
            const content = this.itemLists[this.modalSelectedList];
            delete this.itemLists[this.modalSelectedList];
            this.itemLists[this.modalInput] = content;
        } else if(this.activeModal === 'removeList' && this.modalSelectedList) {
            delete this.itemLists[this.modalSelectedList];
        } 
        
        // åº§ä½è¡¨æ“ä½œ
        else if (this.activeModal === 'editSeatTable') {
            this.saveSeatTable();
            return; // ä¸åŸ·è¡Œå¾ŒçºŒçš„ saveInfo å’Œ closeModal
        } 
        
        // è¯çµ¡äººæ“ä½œ
        else if (this.activeModal === 'addContact' || this.activeModal === 'editContact') {
            this.saveContact();
            return; // ä¸åŸ·è¡Œå¾ŒçºŒçš„ saveInfo å’Œ closeModal
        }
        
        this.saveInfo();
        this.closeModal();
    },

    // ==================== é€šç”¨åŠŸèƒ½ ====================
    saveInfo() {
        this.sync('wedding_items', this.itemLists);
        this.sync('seatTables', this.seatTables);
    },
    isOngoing(s, e) {
        if(!s) return false;
        const now=new Date(), n=now.getHours()*60+now.getMinutes();
        const st=parseInt(s.split(':')[0])*60+parseInt(s.split(':')[1]);
        const et=e?(parseInt(e.split(':')[0])*60+parseInt(e.split(':')[1])):st+60;
        return n>=st && n<=et;
    },
    isFinished(s, e){
        if(!s) return false;
        const now=new Date(), n=now.getHours()*60+now.getMinutes();
        const et=e?(parseInt(e.split(':')[0])*60+parseInt(e.split(':')[1])):parseInt(s.split(':')[0])*60+parseInt(s.split(':')[1])+60;
        return n>et;
    },
    
    getPersonColor(p){
        if(this.femaleSide.includes(p)) return 'bg-pink-400';
        if(this.maleSide.includes(p)) return 'bg-blue-400';
        return 'bg-emerald-400';
    },
    
    // å°‡æ•¸æ“šåŒæ­¥åˆ° LocalStorage
    sync(k, v){
        localStorage.setItem(k, JSON.stringify(v))
    },
    initScheduleState() {
        this.scheduleList.forEach(s => s.expanded = false);
        const sorted = [...this.scheduleList].sort((a,b)=>a.startTime.localeCompare(b.startTime));
        const now = new Date();
        const currentMin = now.getHours()*60 + now.getMinutes();

        let foundIdx = -1;
        for(let i=0; i<sorted.length; i++) {
            const s = sorted[i];
            const st = parseInt(s.startTime.split(':')[0])*60 + parseInt(s.startTime.split(':')[1]);
            const et = s.endTime ? parseInt(s.endTime.split(':')[0])*60 + parseInt(s.endTime.split(':')[1]) : st+60;
            
            if (currentMin <= et) {
                foundIdx = i;
                break;
            }
        }
        
        if(foundIdx !== -1) {
            sorted[foundIdx].expanded = true;
            this.scheduleList = sorted;
            // æ»¾å‹•åˆ°ç¬¬ä¸€å€‹é€²è¡Œä¸­æˆ–æœªé–‹å§‹çš„è¡Œç¨‹
            this.$nextTick(() => {
                const item = document.querySelector('.soft-glow') || document.querySelector('.relative.pl-6');
                if (item) {
                    item.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
        }
    },

    scrollToCurrentSchedule() {
    this.$nextTick(() => {
        // 1. å„ªå…ˆæ‰¾ç•«é¢ä¸Šã€Œæ­£åœ¨é€²è¡Œä¸­ã€çš„é …ç›®
        let target = document.getElementById('current-schedule-item');

        // 2. å¦‚æœæ²’æœ‰æ­£åœ¨é€²è¡Œçš„ï¼Œå‰‡å¾ã€Œç›®å‰ç¯©é¸éå¾Œçš„åˆ—è¡¨ã€æ‰¾ä¸‹ä¸€å€‹æœ€æ¥è¿‘çš„
        if (!target) {
            const now = new Date();
            const nowStr = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            // ä½¿ç”¨ç¯©é¸éçš„åˆ—è¡¨ (é‡è¦ï¼šé€™æ˜¯æ‚¨ computed è£¡çš„è®Šæ•¸)
            const upcoming = this.filteredScheduleList
                .filter(s => s.startTime > nowStr)
                .sort((a, b) => a.startTime.localeCompare(b.startTime));

            if (upcoming.length > 0) {
                const nextId = upcoming[0].id;
                // ä½¿ç”¨æˆ‘å€‘åœ¨å¡ç‰‡ä¸Šå®šç¾©çš„ data-id ä¾†å°‹æ‰¾ DOM å…ƒç´ 
                target = document.querySelector(`[data-id="${nextId}"]`);
            }
        }

        // 3. åŸ·è¡Œå¹³æ»‘æ»¾å‹•
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    });
},

    downloadCSV(filename, headers, data){
        const csvRows = [];
        csvRows.push(headers.join(',')); 

        for(const row of data) {
            const values = row.map(String).map(s => `"${s.replace(/"/g, '""')}"`); // è™•ç†é€—è™Ÿå’Œå¼•è™Ÿ
            csvRows.push(values.join(','));
        }

        const csvString = csvRows.join('\n');
        const blob = new Blob(["\uFEFF" + csvString], { type: 'text/csv;charset=utf-8;' }); // åŠ å…¥ BOM ä»¥æ”¯æ´ä¸­æ–‡
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    },
    exportGoldCSV(){
        this.downloadCSV('gold.csv', ['ç·¨è™Ÿ','é¡åˆ¥','æ•¸é‡','é€å‡ºäºº','å®¶ç³»'], this.golds.filter(x=>!x.deleted).map(x=>[x.no, x.category, x.qty, x.from, x.side]))
    },
    exportGiftCSV(){
        this.downloadCSV('gift.csv', ['ç·¨è™Ÿ','é¡åˆ¥','é‡‘é¡','å°è±¡','å®¶ç³»','æè¿°'], this.gifts.filter(x=>!x.deleted).map(x=>[x.no, x.type, x.amount, x.from, x.side, x.desc]))
    }
  },
  mounted() {
    // è¼‰å…¥ localStorage æ•¸æ“š
    const storageItems = ['wedding_items', 'scheduleList', 'goldList', 'giftList', 'contactList', 'seatTables', 'photoSchedules'];
    
    storageItems.forEach(key => {
      const data = localStorage.getItem(key);
      if(data) {
        try {
          const parsedData = JSON.parse(data);
          if(key === 'wedding_items') this.itemLists = parsedData;
          // è¡Œç¨‹æ•¸æ“šæ•…æ„ä¸è¼‰å…¥ï¼Œä»¥ä¿ç•™æœ¬æ¬¡åŒ¯å…¥çš„ CSV è³‡æ–™
          // else if(key === 'scheduleList') this.scheduleList = parsedData;
          else if(key === 'goldList') this.golds = parsedData;
          else if(key === 'giftList') this.gifts = parsedData;
          // è¯çµ¡äººåˆ—è¡¨æ•…æ„ä¸è¼‰å…¥ï¼Œä»¥ä¿ç•™æœ¬æ¬¡åŒ¯å…¥çš„ Excel è³‡æ–™
          // else if(key === 'contactList') this.contacts = parsedData; 
          else if(key === 'seatTables') this.seatTables = parsedData.map(t => ({...t, id: Number(t.id)}));
          else if(key === 'photoSchedules') this.photoSchedules = parsedData;
        } catch (e) {
          console.error(`Error parsing localStorage key ${key}:`, e);
        }
      }
    });

    this.initScheduleState();
    
    // æ¯åˆ†é˜æ›´æ–°ä¸€æ¬¡æ™‚é–“ï¼Œç”¨æ–¼è¡Œç¨‹é«˜äº®é¡¯ç¤º
    setInterval(() => {
        this.nowTick = Date.now();
        this.scheduleList = [...this.scheduleList]; // è§¸ç™¼ Vue æ›´æ–°
        // ã€æ–°åŠŸèƒ½ 3-1ï¼šåœ¨æ¯åˆ†é˜æ›´æ–°æ™‚ï¼Œå¦‚æœç•¶å‰æ˜¯ schedule é é¢ï¼Œæª¢æŸ¥æ˜¯å¦éœ€è¦æ»¾å‹•ã€‘
        if (this.tab === 'schedule') {
            // æ³¨æ„ï¼šæˆ‘å€‘åœ¨é€™è£¡ä½¿ç”¨ this.scrollToCurrentScheduleï¼Œç¢ºä¿å®ƒåœ¨ Vue å¯¦ä¾‹çš„ç¯„åœå…§è¢«å‘¼å«
            this.scrollToCurrentSchedule(); 
        }
    }, 60000);
    // ã€å„ªåŒ– 7-3ã€‘åœ¨ mounted è¨­ç½®æ‰€æœ‰ photoSchedules çµ„åˆ¥é è¨­ç‚ºæ”¶åˆ
  this.photoSchedules.forEach(group => {
      // é è¨­å°‡æ‰€æœ‰çµ„åˆ¥æ¨™è¨˜ç‚ºæ”¶åˆ (true)
      this.collapsedPhotoGroups[group.title] = true;
  });
  }
}).mount('#app')
</script>

</body>
</html>
